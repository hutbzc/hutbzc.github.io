<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>尚硅谷NodeJs笔记 | Southblock'Blog</title><meta name="author" content="Southblock"><meta name="copyright" content="Southblock"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="原视频:  尚硅谷Node.js零基础视频教程，nodejs新手到高手 原文链接：【前端】尚硅谷Node.js零基础视频教程笔记 1.基础node.js官网中文官网 1.1. 基础命令 node -v 查看版本号 node hello.js 运行js文件  1.2. 注意事项Node.js中不能使用BOM和DOM的API 123console.log(&#x27;hello world&#x27;">
<meta property="og:type" content="article">
<meta property="og:title" content="尚硅谷NodeJs笔记">
<meta property="og:url" content="https://hutbzc.github.io/2024/08/26/relay/%E5%B0%9A%E7%A1%85%E8%B0%B7NodeJs%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Southblock&#39;Blog">
<meta property="og:description" content="原视频:  尚硅谷Node.js零基础视频教程，nodejs新手到高手 原文链接：【前端】尚硅谷Node.js零基础视频教程笔记 1.基础node.js官网中文官网 1.1. 基础命令 node -v 查看版本号 node hello.js 运行js文件  1.2. 注意事项Node.js中不能使用BOM和DOM的API 123console.log(&#x27;hello world&#x27;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://bu.dusays.com/2024/05/14/664353a6a5232.jpg">
<meta property="article:published_time" content="2024-08-26T14:21:00.000Z">
<meta property="article:modified_time" content="2025-06-08T09:08:12.850Z">
<meta property="article:author" content="Southblock">
<meta property="article:tag" content="前端">
<meta property="article:tag" content="NodeJs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://bu.dusays.com/2024/05/14/664353a6a5232.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://hutbzc.github.io/2024/08/26/relay/%E5%B0%9A%E7%A1%85%E8%B0%B7NodeJs%E7%AC%94%E8%AE%B0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.14.0-b3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.35/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>(()=>{
      const saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
      
      window.btf = {
        saveToLocal: saveToLocal,
        getScript: (url, attr = {}) => new Promise((resolve, reject) => {
          const script = document.createElement('script')
          script.src = url
          script.async = true
          script.onerror = reject
          script.onload = script.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            script.onload = script.onreadystatechange = null
            resolve()
          }

          Object.keys(attr).forEach(key => {
            script.setAttribute(key, attr[key])
          })

          document.head.appendChild(script)
        }),

        getCSS: (url, id = false) => new Promise((resolve, reject) => {
          const link = document.createElement('link')
          link.rel = 'stylesheet'
          link.href = url
          if (id) link.id = id
          link.onerror = reject
          link.onload = link.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            link.onload = link.onreadystatechange = null
            resolve()
          }
          document.head.appendChild(link)
        }),

        addGlobalFn: (key, fn, name = false, parent = window) => {
          const pjaxEnable = false
          if (!pjaxEnable && key.startsWith('pjax')) return

          const globalFn = parent.globalFn || {}
          const keyObj = globalFn[key] || {}
    
          if (name && keyObj[name]) return
    
          name = name || Object.keys(keyObj).length
          keyObj[name] = fn
          globalFn[key] = keyObj
          parent.globalFn = globalFn
        }
      }
    
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode
      
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })()</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '尚硅谷NodeJs笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-06-08 17:08:12'
}</script><meta name="generator" content="Hexo 7.2.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://bu.dusays.com/2024/05/14/664353a6a5232.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">37</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Southblock'Blog"><span class="site-name">Southblock'Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">尚硅谷NodeJs笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-08-26T14:21:00.000Z" title="发表于 2024-08-26 22:21:00">2024-08-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-06-08T09:08:12.850Z" title="更新于 2025-06-08 17:08:12">2025-06-08</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%BD%AC%E5%8F%91/">转发</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="尚硅谷NodeJs笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>原视频:  <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1gM411W7ex/?p=2&vd_source=31d376c1e57cf8a26a31cd3b47080d1f">尚硅谷Node.js零基础视频教程，nodejs新手到高手</a></p>
<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_26127905/article/details/135833943">【前端】尚硅谷Node.js零基础视频教程笔记</a></p>
<h1 id="1-基础"><a href="#1-基础" class="headerlink" title="1.基础"></a>1.基础</h1><p><a target="_blank" rel="noopener" href="https://nodejs.org/en">node.js官网</a><br><a target="_blank" rel="noopener" href="https://nodejs.cn/">中文官网</a></p>
<h2 id="1-1-基础命令"><a href="#1-1-基础命令" class="headerlink" title="1.1. 基础命令"></a>1.1. 基础命令</h2><ul>
<li>node -v 查看版本号</li>
<li>node hello.js 运行js文件</li>
</ul>
<h2 id="1-2-注意事项"><a href="#1-2-注意事项" class="headerlink" title="1.2. 注意事项"></a>1.2. 注意事项</h2><p>Node.js中不能使用BOM和DOM的API</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.log(&#x27;hello world&#x27;);</span><br><span class="line">console.log(window);//报错</span><br><span class="line">console.log(document);//报错</span><br></pre></td></tr></table></figure>

<p>说明:浏览器中的javascript语法包括如下内容组成部分</p>
<p><img src="https://bu.dusays.com/2024/08/24/66c9f3c32dca6.png" alt="在这里插入图片描述"></p>
<p>node.js语法的组成部分</p>
<p><img src="https://bu.dusays.com/2024/08/24/66c9f3d93caae.png" alt="在这里插入图片描述"></p>
<h1 id="2-Buffer（缓冲器）介绍与创建"><a href="#2-Buffer（缓冲器）介绍与创建" class="headerlink" title="2.Buffer（缓冲器）介绍与创建"></a>2.Buffer（缓冲器）介绍与创建</h1><h2 id="2-1-概念"><a href="#2-1-概念" class="headerlink" title="2.1 概念"></a>2.1 概念</h2><blockquote>
<p>Buffer 是一个类似于数组的 对象 ，用于表示固定长度的字节序列<br>Buffer 本质是一段内存空间，专门用来处理 二进制数据 。</p>
</blockquote>
<p><img src="https://bu.dusays.com/2024/08/24/66c9f65c0bc19.png" alt="在这里插入图片描述"></p>
<h2 id="2-2-特点"><a href="#2-2-特点" class="headerlink" title="2.2 特点"></a>2.2 特点</h2><blockquote>
<p>Buffer 大小固定且无法调整<br>Buffer 性能较好，可以直接对计算机内存进行操作<br>每个元素的大小为 1 字节（byte）</p>
</blockquote>
<p><img src="https://bu.dusays.com/2024/08/24/66c9f662bd2e7.png" alt="在这里插入图片描述"></p>
<h2 id="2-3-使用"><a href="#2-3-使用" class="headerlink" title="2.3 使用"></a>2.3 使用</h2><ul>
<li>创建 Buffer</li>
</ul>
<blockquote>
<p> Node.js 中创建 Buffer 的方式主要如下几种</p>
<ol>
<li>Buffer.alloc</li>
<li>Buffer.allocUnsafe</li>
<li>Buffer.from</li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建了一个长度为 10 字节的 Buffer，相当于申请了 10 字节的内存空间，每个字节的值为 0</span></span><br><span class="line"><span class="keyword">let</span> buf_1 = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">10</span>) <span class="comment">//=&gt;结果为&lt;Buffer 00 00 00 00 00 00 00 00 00 00&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建了一个长度为 10 字节的 Buffer，buffer 中可能存在旧的数据, 可能会影响执行结果，所以叫unsafe</span></span><br><span class="line"><span class="keyword">let</span> buf_2 = <span class="title class_">Buffer</span>.<span class="title function_">allocUnsafe</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过字符串创建 Buffer</span></span><br><span class="line"><span class="keyword">let</span> buf_3 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line"><span class="comment">//通过数组创建 Buffer</span></span><br><span class="line"><span class="keyword">let</span> buf_4 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>([<span class="number">105</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">118</span>, <span class="number">101</span>, <span class="number">121</span>, <span class="number">111</span>, <span class="number">117</span>]);</span><br></pre></td></tr></table></figure>



<ul>
<li>Buffer 与字符串的转化</li>
</ul>
<blockquote>
<p>toString 方法将 Buffer 转为字符串 (toString 默认是按照 utf-8 编码方式进行转换的。)</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buf_4 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>([<span class="number">105</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">118</span>, <span class="number">101</span>, <span class="number">121</span>, <span class="number">111</span>, <span class="number">117</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf_4.<span class="title function_">toString</span>())</span><br></pre></td></tr></table></figure>



<ul>
<li>Buffer 的读写</li>
</ul>
<blockquote>
<p>Buffer 可以直接通过 [] 的方式对数据进行处理。<br>注意:<br>如果修改的数值超过 255 ，则超过 8 位数据会被舍弃<br>一个 utf-8 的中文字符 一般 占 3 个字节</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//读取</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf_3[<span class="number">1</span>]);</span><br><span class="line"><span class="comment">//修改</span></span><br><span class="line">buf_3[<span class="number">1</span>] = <span class="number">97</span>;</span><br><span class="line"><span class="comment">//查看字符串结果</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf_3.<span class="title function_">toString</span>());</span><br></pre></td></tr></table></figure>



<h1 id="3-fs模块-file-system"><a href="#3-fs模块-file-system" class="headerlink" title="3. fs模块(file system)"></a>3. fs模块(file system)</h1><blockquote>
<p>fs 全称为 file system ，称之为 文件系统 ，是 Node.js 中的 内置模块 ，可以对计算机中的磁盘进行操<br>作。</p>
</blockquote>
<h2 id="3-1-文件写入"><a href="#3-1-文件写入" class="headerlink" title="3.1 文件写入"></a>3.1 文件写入</h2><p>文件写入就是将 数据 保存到 文件 中，我们可以使用如下几个方法来实现该效果</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>writeFile</td>
<td>异步写入</td>
</tr>
<tr>
<td>writeFileSync</td>
<td>同步写入</td>
</tr>
<tr>
<td>appendFile &#x2F; appendFileSync</td>
<td>追加写入</td>
</tr>
<tr>
<td>createWriteStream</td>
<td>流式写入</td>
</tr>
</tbody></table>
<ul>
<li>writeFile 异步写入</li>
</ul>
<blockquote>
<p>语法： fs.writeFile(file, data[, options], callback)<br>参数说明：</p>
<p>file 文件名<br>data 待写入的数据<br>options 选项设置 （可选）<br>callback 写入回调<br>返回值： undefined</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// require 是 Node.js 环境中的&#x27;全局&#x27;变量，用来导入模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">// 参数说明：</span></span><br><span class="line"><span class="comment">// file 文件名</span></span><br><span class="line"><span class="comment">// data 待写入的数据</span></span><br><span class="line"><span class="comment">// options 选项设置 （可选）</span></span><br><span class="line"><span class="comment">// callback 写入回调</span></span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&#x27;./fileBak/aa.txt&#x27;</span>,<span class="string">&#x27;三人行&#x27;</span>,<span class="function"><span class="params">err</span> =&gt;</span> &#123;<span class="comment">//不存在,则创建</span></span><br><span class="line">    <span class="comment">//如果写入失败,则调用回调函数,会传入错误对象,如写入成功,会传入null</span></span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;写入成功&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>writeFileSync同步写入</li>
</ul>
<blockquote>
<p>语法: <code>fs.writeFileSync(file, data[, options])</code><br>参数与 fs.writeFile 大体一致，只是没有 callback 参数<br>返回值： <code>undefined</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// require 是 Node.js 环境中的&#x27;全局&#x27;变量，用来导入模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">// 参数说明：</span></span><br><span class="line"><span class="comment">// file 文件名</span></span><br><span class="line"><span class="comment">// data 待写入的数据</span></span><br><span class="line"><span class="comment">// options 选项设置（可选）</span></span><br><span class="line">fs.<span class="title function_">writeFileSync</span>(<span class="string">&#x27;./fileBak/bb.txt&#x27;</span>,<span class="string">&#x27;三人行&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;写入完成&#x27;</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Node.js 中的磁盘操作是由其他 线程 完成的，结果的处理有两种模式：<br>同步处理 JavaScript 主线程 会等待 其他线程的执行结果，然后再继续执行主线程的代码，<br>效率较低<br>异步处理 JavaScript 主线程 不会等待 其他线程的执行结果，直接执行后续的主线程代码，<br>效率较好</p>
</blockquote>
<ul>
<li>appendFile &#x2F; appendFileSync追加写入</li>
</ul>
<blockquote>
<p>appendFile 作用是在文件尾部追加内容，appendFile 语法与writeFile语法完全相同<br>语法:<br>fs.appendFile(file, data[, options], callback)<br>fs.appendFileSync(file, data[, options])<br>返回值： 二者都为 undefined</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// require 是 Node.js 环境中的&#x27;全局&#x27;变量，用来导入模块</span></span><br><span class="line"><span class="comment">// require 是 Node.js 环境中的&#x27;全局&#x27;变量，用来导入模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">// 参数说明：</span></span><br><span class="line"><span class="comment">// file 文件名</span></span><br><span class="line"><span class="comment">// data 待写入的数据</span></span><br><span class="line"><span class="comment">// options 选项设置 （可选）</span></span><br><span class="line"><span class="comment">// callback 写入回调</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// fs.appendFile(&#x27;./fileBak/aa.txt&#x27;,&#x27;三人行&#x27;,err =&gt; &#123;//不存在,则创建,异步追加</span></span><br><span class="line">    fs.<span class="title function_">appendFileSync</span>(<span class="string">&#x27;./fileBak/aa.txt&#x27;</span>,<span class="string">&#x27;三人行&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>createWriteStream流式写入</li>
</ul>
<blockquote>
<p>语法： fs.createWriteStream(path[, options])<br>参数说明：</p>
<ul>
<li>path 文件路径</li>
<li>options 选项配置（ 可选 ）</li>
<li>返回值： Object</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// require 是 Node.js 环境中的&#x27;全局&#x27;变量，用来导入模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">// 参数说明：</span></span><br><span class="line"><span class="comment">// file 文件名</span></span><br><span class="line"><span class="comment">// options 选项设置 （可选）</span></span><br><span class="line"><span class="keyword">var</span> ws = fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;./fileBak/cc.txt&#x27;</span>);</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;11&#x27;</span>);</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;22&#x27;</span>);</span><br><span class="line">ws.<span class="title function_">end</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>程序打开一个文件是需要消耗资源的 ，流式写入可以减少打开关闭文件的次数。<br>流式写入方式适用于 大文件写入或者频繁写入 的场景, writeFile 适合于 写入频率较低的场景</p>
</blockquote>
<h2 id="3-2-文件读取"><a href="#3-2-文件读取" class="headerlink" title="3.2 文件读取"></a>3.2 文件读取</h2><blockquote>
<p>文件读取顾名思义，就是通过程序从文件中取出其中的数据，我们可以使用如下几种方式</p>
</blockquote>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>readFile</td>
<td>异步读取</td>
</tr>
<tr>
<td>readFileSync</td>
<td>同步读取</td>
</tr>
<tr>
<td>createReadStream</td>
<td>流式读取</td>
</tr>
</tbody></table>
<ul>
<li>readFile 异步读取</li>
</ul>
<blockquote>
<p>语法： fs.readFile(path[, options], callback)<br>参数说明：</p>
<ul>
<li>path 文件路径</li>
<li>options 选项配置</li>
<li>callback 回调函数</li>
<li>返回值：undefined</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./fileBak/aa.txt&#x27;</span>,<span class="function">(<span class="params">err,data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">throw</span> err</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./fileBak/aa.txt&#x27;</span>,<span class="string">&#x27;utf-8&#x27;</span>,<span class="function">(<span class="params">err,data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">throw</span> err</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>readFileSync 同步读取</li>
</ul>
<blockquote>
<p>语法： fs.readFileSync(path[, options])<br>参数说明：</p>
<ul>
<li>path 文件路径</li>
<li>options 选项配置</li>
<li>返回值： string | Buffer</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> data1 = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./fileBak/aa.txt&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data1)<span class="comment">// data1.toString()会将buffer转换; toString 方法将 Buffer 转为字符串 (toString 默认是按照 utf-8 编码方式进行转换的。)</span></span><br><span class="line"><span class="keyword">var</span> data2 = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./fileBak/aa.txt&#x27;</span>,<span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data2)</span><br></pre></td></tr></table></figure>

<ul>
<li>createReadStream 流式读取</li>
</ul>
<blockquote>
<p>语法： fs.createReadStream(path[, options])<br>参数说明：</p>
<ul>
<li>path 文件路径</li>
<li>options 选项配置（ 可选 ）</li>
<li>返回值： Object</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> readStream = fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;./fileBak/aa.txt&#x27;</span>,<span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">readStream.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>,<span class="function"><span class="params">data3</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data3)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data3.<span class="property">length</span>)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//读取完毕后,执行end回调</span></span><br><span class="line">readStream.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取完后&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="3-3-文件移动与重命名"><a href="#3-3-文件移动与重命名" class="headerlink" title="3.3 文件移动与重命名"></a>3.3 文件移动与重命名</h2><blockquote>
<p>在 Node.js 中，我们可以使用 rename 或 renameSync&#96; 来移动或重命名 文件或文件夹<br>语法：</p>
<ul>
<li>fs.rename(oldPath, newPath, callback)</li>
<li>fs.renameSync(oldPath, newPath)</li>
</ul>
</blockquote>
<blockquote>
<p>参数说明：</p>
<ul>
<li>oldPath 文件当前的路径</li>
<li>newPath 文件新的路径</li>
<li>callback 操作后的回调(同步)</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">rename</span>(<span class="string">&#x27;./fileBak/aa.txt&#x27;</span>,<span class="string">&#x27;./fileBak/aa2.txt&#x27;</span>,<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;移动完成&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">renameSync</span>(<span class="string">&#x27;./fileBak/aa2.txt&#x27;</span>,<span class="string">&#x27;./fileBak/aa.txt&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="3-4-文件删除"><a href="#3-4-文件删除" class="headerlink" title="3.4 文件删除"></a>3.4 文件删除</h2><blockquote>
<p>在 Node.js 中，我们可以使用 unlink 或 unlinkSync 来删除文件<br>语法：</p>
<ul>
<li>fs.unlink(path, callback)</li>
<li>fs.unlinkSync(path)</li>
</ul>
</blockquote>
<blockquote>
<p>参数说明：</p>
<ul>
<li>path 文件路径</li>
<li>callback 操作后的回调</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">unlink</span>(<span class="string">&#x27;./fileBak/aa.txt&#x27;</span>,<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除完成&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">unlinkSync</span>(<span class="string">&#x27;./fileBak/aa.txt&#x27;</span>);</span><br></pre></td></tr></table></figure>



<h2 id="3-5-文件夹操作"><a href="#3-5-文件夹操作" class="headerlink" title="3.5 文件夹操作"></a>3.5 文件夹操作</h2><p>借助 Node.js 的能力，我们可以对文件夹进行 创建 、 读取 、 删除 等操作</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>mkdir &#x2F; mkdirSync</td>
<td>创建文件夹</td>
</tr>
<tr>
<td>readdir &#x2F; readdirSync</td>
<td>读取文件夹</td>
</tr>
<tr>
<td>rmdir &#x2F; rmdirSync</td>
<td>删除文件夹</td>
</tr>
<tr>
<td>mkdir &#x2F; mkdirSync</td>
<td>创建文件夹</td>
</tr>
</tbody></table>
<blockquote>
<p>在 Node.js 中，我们可以使用 mkdir 或 mkdirSync 来创建文件夹<br>语法：</p>
<ul>
<li>fs.mkdir(path[, options], callback)</li>
<li>fs.mkdirSync(path[, options])</li>
</ul>
</blockquote>
<blockquote>
<p>参数说明：</p>
<ul>
<li>path 文件夹路径</li>
<li>options 选项配置（ 可选 ）</li>
<li>callback 操作后的回调</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">mkdir</span>(<span class="string">&#x27;./fileBak/cc&#x27;</span>,<span class="function"><span class="params">err</span> =&gt;</span> &#123;<span class="comment">//如果存在会报错</span></span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;创建成功&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">mkdirSync</span>(<span class="string">&#x27;./fileBak/bbD&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">//异步递归创建文件夹</span></span><br><span class="line">fs.<span class="title function_">mkdir</span>(<span class="string">&#x27;./fileBak/1/2/3&#x27;</span>,&#123;<span class="attr">recursive</span>:<span class="literal">true</span>&#125;,<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;同步递归创建文件夹&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">//同步递归创建文件夹</span></span><br><span class="line">fs.<span class="title function_">mkdirSync</span>(<span class="string">&#x27;./fileBak/1/2/3&#x27;</span>,&#123;<span class="attr">recursive</span>:<span class="literal">true</span>&#125;);</span><br></pre></td></tr></table></figure>



<ul>
<li>readdir &#x2F; mkdirSync 读取文件夹</li>
</ul>
<blockquote>
<p> 在 Node.js 中，我们可以使用 readdir 或 readdirSync 来读取文件夹<br>语法：</p>
<ul>
<li>fs.readdir(path[, options], callback)</li>
<li>fs.readdirSync(path[, options])</li>
</ul>
</blockquote>
<blockquote>
<p>参数说明：</p>
<ul>
<li>path 文件夹路径</li>
<li>options 选项配置（ 可选 ）</li>
<li>callback 操作后的回调</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">readdir</span>(<span class="string">&#x27;./fileBak/1&#x27;</span>,<span class="function">(<span class="params">err,data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> data = fs.<span class="title function_">readdirSync</span>(<span class="string">&#x27;./fileBak/1&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br></pre></td></tr></table></figure>



<ul>
<li>rmdir &#x2F; mkdirSync 删除文件夹</li>
</ul>
<blockquote>
<p>在 Node.js 中，我们可以使用 rmdir 或 rmdirSync 来删除文件夹<br>语法：</p>
<ul>
<li>fs.rmdir(path[, options], callback)</li>
<li>fs.rmdirSync(path[, options])</li>
</ul>
</blockquote>
<blockquote>
<p>参数说明：</p>
<ul>
<li>path 文件夹路径</li>
<li>options 选项配置（ 可选 ）</li>
<li>callback 操作后的回调</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">//异步删除文件夹</span></span><br><span class="line"><span class="comment">// fs.rmdir(&#x27;./fileBak/cc&#x27;, err =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     if(err) throw err;</span></span><br><span class="line"><span class="comment">//     console.log(&#x27;删除成功&#x27;);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//异步递归删除文件夹</span></span><br><span class="line">fs.<span class="title function_">rmdir</span>(<span class="string">&#x27;./fileBak/1&#x27;</span>, &#123;<span class="attr">recursive</span>: <span class="literal">true</span>&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;递归删除&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="3-6-查看资源状态"><a href="#3-6-查看资源状态" class="headerlink" title="3.6 查看资源状态"></a>3.6 查看资源状态</h2><blockquote>
<p>在 Node.js 中，我们可以使用 stat 或 statSync 来查看资源的详细信息<br>语法：</p>
<ul>
<li>fs.stat(path[, options], callback)</li>
<li>fs.statSync(path[, options])</li>
</ul>
</blockquote>
<blockquote>
<p>参数说明：</p>
<ul>
<li>path 文件夹路径</li>
<li>options 选项配置（ 可选 ）</li>
<li>callback 操作后的回调</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">//异步获取状态</span></span><br><span class="line"><span class="comment">// fs.stat(&#x27;./fileBak/aa.txt&#x27;, (err, data) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     if(err) throw err;</span></span><br><span class="line"><span class="comment">//     console.log(data);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//同步获取状态</span></span><br><span class="line"><span class="keyword">let</span> data = fs.<span class="title function_">statSync</span>(<span class="string">&#x27;./fileBak/aa.txt&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">isFile</span>())<span class="comment">//是否是文件 true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">isDirectory</span>())<span class="comment">//是否是目录 false</span></span><br></pre></td></tr></table></figure>



<h2 id="3-7-相对路径问题"><a href="#3-7-相对路径问题" class="headerlink" title="3.7 相对路径问题"></a>3.7 相对路径问题</h2><blockquote>
<p>fs 模块对资源进行操作时，路径的写法有两种：</p>
<ul>
<li><p>相对路径</p>
<ul>
<li><p>.&#x2F;座右铭.txt 当前目录下的座右铭.txt</p>
</li>
<li><p>座右铭.txt 等效于上面的写法</p>
</li>
<li><p>..&#x2F;座右铭.txt 当前目录的上一级目录中的座右铭.txt</p>
</li>
</ul>
</li>
<li><p>绝对路径</p>
<ul>
<li><p>D:&#x2F;Program Files windows 系统下的绝对路径</p>
</li>
<li><p>&#x2F;usr&#x2F;bin Linux 系统下的绝对路径</p>
</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<p>相对路径中所谓的 当前目录 ，指的是 命令行的工作目录 ，而并非是文件的所在目录<br>所以当命令行的工作目录与文件所在目录不一致时，会出现一些 BUG</p>
</blockquote>
<h2 id="3-8-dirname"><a href="#3-8-dirname" class="headerlink" title="3.8 __dirname"></a>3.8 __dirname</h2><blockquote>
<p>dirname 与 require 类似，都是 Node.js 环境中的’全局’变量，dirname 保存着 当前文件所在目录的绝对路径 ，可以使用 dirname 与文件名拼接成绝对路径<br>let data &#x3D; fs.readFileSync(dirname + ‘&#x2F;data.txt’);</p>
</blockquote>
<h2 id="3-9-练习复制文件脚本"><a href="#3-9-练习复制文件脚本" class="headerlink" title="3.9 练习复制文件脚本"></a>3.9 练习复制文件脚本</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./fileBak/1.png&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">throw</span>  err;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;开始读取....&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    fs.<span class="title function_">writeFile</span>(<span class="string">&#x27;./fileBak/2.png&#x27;</span>, data, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="keyword">throw</span>  err;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;开始导出...&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;结束导出...&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;结束读取....&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// fs.writeFile(&#x27;./fileBak/2.png&#x27;, &#x27;f&#x27;, err =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     if (err) &#123;</span></span><br><span class="line"><span class="comment">//         throw  err;</span></span><br><span class="line"><span class="comment">//         return;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//     console.log(&#x27;开始导出...&#x27;);</span></span><br><span class="line"><span class="comment">//     console.log(&#x27;结束导出...&#x27;);</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br></pre></td></tr></table></figure>

<h1 id="4-path-模块"><a href="#4-path-模块" class="headerlink" title="4.path 模块"></a>4.path 模块</h1><p>path 模块提供了 操作路径 的功能，我们将介绍如下几个较为常用的几个 API：</p>
<table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>path.resolve</td>
<td>拼接规范的绝对路径 常用</td>
</tr>
<tr>
<td>path.sep</td>
<td>获取操作系统的路径分隔符</td>
</tr>
<tr>
<td>path.parse</td>
<td>解析路径并返回对象</td>
</tr>
<tr>
<td>path.basename</td>
<td>获取路径的基础名称</td>
</tr>
<tr>
<td>path.dirname</td>
<td>获取路径的目录名</td>
</tr>
<tr>
<td>path.extname</td>
<td>获得路径的扩展名</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="comment">//获取路径分隔符</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="property">sep</span>);</span><br><span class="line"><span class="comment">//拼接绝对路径</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;test&#x27;</span>));</span><br><span class="line"><span class="comment">//解析路径</span></span><br><span class="line"><span class="keyword">var</span> pathname = <span class="string">&#x27;F:\\front-end\\[B站]尚硅谷Nodejs\\fileBak\\aa.txt&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;解析路径&#x27;</span>,path.<span class="title function_">parse</span>(pathname));<span class="comment">//&#123;root:&#x27;F:\\&#x27;,   dir: &#x27;F:\\front-end\\[B站]尚硅谷Nodejs\\fileBak&#x27;,</span></span><br><span class="line"><span class="comment">//  base: &#x27;aa.txt&#x27;,   ext: &#x27;.txt&#x27;,   name: &#x27;aa&#x27; &#125;</span></span><br><span class="line"><span class="comment">//获取路径基础名称</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取路径基础名称&#x27;</span>,path.<span class="title function_">basename</span>(pathname));<span class="comment">//aa.txt</span></span><br><span class="line"><span class="comment">//获取路径的目录名</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取路径的目录名&#x27;</span>,path.<span class="title function_">dirname</span>(pathname));<span class="comment">// F:\front-end\[B站]尚硅谷Nodejs\fileBak</span></span><br><span class="line"><span class="comment">//获取路径的扩展名</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取路径的扩展名&#x27;</span>,path.<span class="title function_">extname</span>(pathname));<span class="comment">//.txt</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;文件的绝对路径&#x27;</span>,__filename);<span class="comment">//全局变量</span></span><br></pre></td></tr></table></figure>



<h1 id="5-http模块"><a href="#5-http模块" class="headerlink" title="5.http模块"></a>5.http模块</h1><h2 id="5-1-使用-nodejs-创建-HTTP-服务"><a href="#5-1-使用-nodejs-创建-HTTP-服务" class="headerlink" title="5.1 使用 nodejs 创建 HTTP 服务"></a>5.1 使用 nodejs 创建 HTTP 服务</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 导入 http 模块</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="comment">//2. 创建服务对象 create 创建 server 服务</span></span><br><span class="line"><span class="comment">// request 意为请求. 是对请求报文的封装对象, 通过 request 对象可以获得请求报文的数据</span></span><br><span class="line"><span class="comment">// response 意为响应. 是对响应报文的封装对象, 通过 response 对象可以设置响应报文</span></span><br><span class="line"><span class="keyword">var</span> server=http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>)=&gt;</span>&#123;</span><br><span class="line">  response.<span class="title function_">setHeader</span>(<span class="string">&#x27;content-type&#x27;</span>,<span class="string">&#x27;text/html;charset=utf-8&#x27;</span>);<span class="comment">//解决中文乱码</span></span><br><span class="line">  response.<span class="title function_">end</span>(<span class="string">&#x27;Hello HTTP server,锅子&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//3. 监听端口, 启动服务</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动,端口9000监听中...&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// http.createServer 里的回调函数的执行时机： 当接收到 HTTP 请求的时候，就会执行</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>http.createServer 里的回调函数的执行时机： 当接收到 HTTP 请求的时候，就会执行<br>注意事项:</p>
<ul>
<li>命令行 ctrl + c 停止服务</li>
<li>当服务启动后，更新代码 必须重启服务才能生效</li>
<li>响应内容中文乱码的解决办法response.setHeader(‘content-type’,’text&#x2F;html;charset&#x3D;utf-8’);</li>
</ul>
</blockquote>
<h2 id="5-2-HTTP-请求报文"><a href="#5-2-HTTP-请求报文" class="headerlink" title="5.2 HTTP 请求报文"></a>5.2 HTTP 请求报文</h2><p><img src="https://bu.dusays.com/2024/08/25/66ca98ee817dd.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>注意事项：</p>
<ul>
<li>request.url 只能获取路径以及查询字符串，无法获取 URL 中的域名以及协议的内容</li>
<li>request.headers 将请求信息转化成一个对象，并将属性名都转化成了『小写』</li>
<li>关于路径：如果访问网站的时候，只填写了 IP 地址或者是域名信息，此时请求的路径为『 &#x2F; 』</li>
<li>关于 favicon.ico：这个请求是属于浏览器自动发送的请求</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 导入 http 模块</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="comment">//2. 创建服务对象 create 创建 server 服务</span></span><br><span class="line"><span class="comment">// request 意为请求. 是对请求报文的封装对象, 通过 request 对象可以获得请求报文的数据</span></span><br><span class="line"><span class="comment">// response 意为响应. 是对响应报文的封装对象, 通过 response 对象可以设置响应报文</span></span><br><span class="line"><span class="keyword">var</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(&#x27;request&#x27;,request);//request  对象</span></span><br><span class="line">    <span class="comment">// console.log(&#x27;request.method&#x27;,request.method);//request  对象</span></span><br><span class="line">    <span class="keyword">let</span> &#123;url, method&#125; = request; <span class="comment">//对象的解构赋值</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(url);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(method);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;text/html;charset=utf-8&#x27;</span>);<span class="comment">//解决中文乱码</span></span><br><span class="line">    <span class="keyword">if</span> (url === <span class="string">&#x27;/register&#x27;</span> &amp;&amp; method === <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">        response.<span class="title function_">write</span>(<span class="string">&quot;&lt;h1&gt;注册页面&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (url === <span class="string">&quot;/login&quot;</span> &amp;&amp; method === <span class="string">&quot;GET&quot;</span>) &#123;</span><br><span class="line">        response.<span class="title function_">write</span>(<span class="string">&quot;&lt;h1&gt;登录页面&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        response.<span class="title function_">write</span>(<span class="string">&quot;&lt;h1&gt;404 Not Found&lt;/h1&gt;&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    response.<span class="title function_">end</span>(<span class="string">&#x27;Hello HTTP server,锅子&#x27;</span>);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//3. 监听端口, 启动服务</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动,端口9000监听中...&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// http.createServer 里的回调函数的执行时机： 当接收到 HTTP 请求的时候，就会执行</span></span><br></pre></td></tr></table></figure>



<h2 id="5-3-HTTP-响应报文"><a href="#5-3-HTTP-响应报文" class="headerlink" title="5.3 HTTP 响应报文"></a>5.3 HTTP 响应报文</h2><p><img src="https://bu.dusays.com/2024/08/25/66ca993874d41.png" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">write 和 end 的两种使用情况：</span><br><span class="line"><span class="comment">//1. write 和 end 的结合使用 响应体相对分散</span></span><br><span class="line">response.<span class="title function_">write</span>(<span class="string">&#x27;xx&#x27;</span>);</span><br><span class="line">response.<span class="title function_">write</span>(<span class="string">&#x27;xx&#x27;</span>);</span><br><span class="line">response.<span class="title function_">write</span>(<span class="string">&#x27;xx&#x27;</span>);</span><br><span class="line">response.<span class="title function_">end</span>(); <span class="comment">//每一个请求，在处理的时候必须要执行 end 方法的</span></span><br><span class="line"><span class="comment">//2. 单独使用 end 方法 响应体相对集中</span></span><br><span class="line">response.<span class="title function_">end</span>(<span class="string">&#x27;xxx&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 导入 http 模块</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="comment">//2. 创建服务对象 create 创建 server 服务</span></span><br><span class="line"><span class="comment">// request 意为请求. 是对请求报文的封装对象, 通过 request 对象可以获得请求报文的数据</span></span><br><span class="line"><span class="comment">// response 意为响应. 是对响应报文的封装对象, 通过 response 对象可以设置响应报文</span></span><br><span class="line"><span class="keyword">var</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>,<span class="string">&#x27;application/octet-stream&#x27;</span>);</span><br><span class="line">    response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;!DOCTYPE html&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;&lt;html lang=&quot;en&quot;&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;&lt;head&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;meta charset=&quot;UTF-8&quot;&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;title&gt;Document&lt;/title&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;style&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        td &#123;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;            padding: 20px 40px;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &#125;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        table tr:nth-child(odd) &#123;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;            background: #aef;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &#125;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        table tr:nth-child(even) &#123;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;            background: #fcb;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &#125;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        table, td &#123;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;            border-collapse: collapse;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &#125;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;/style&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;&lt;/head&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;&lt;body&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;&lt;table border=&quot;1&quot;&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;tr&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &lt;td&gt;&lt;/td&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &lt;td&gt;&lt;/td&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &lt;td&gt;&lt;/td&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;/tr&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;tr&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &lt;td&gt;&lt;/td&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &lt;td&gt;&lt;/td&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &lt;td&gt;&lt;/td&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;/tr&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;tr&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &lt;td&gt;&lt;/td&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &lt;td&gt;&lt;/td&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &lt;td&gt;&lt;/td&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;/tr&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;tr&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &lt;td&gt;&lt;/td&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &lt;td&gt;&lt;/td&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &lt;td&gt;&lt;/td&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;/tr&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;&lt;/table&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;script&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        var listOf = document.querySelectorAll(\&#x27;td\&#x27;);\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        for (let i = 0; i &lt; listOf.length; i++) &#123;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;            var element = listOf[i];\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;            // element.onclick = function () &#123;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;            //     console.log(\&#x27;你好啊\&#x27;);\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;            // &#125;;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;            element.addEventListener(\&#x27;click\&#x27;, function () &#123;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;                this.style.background=\&#x27;red\&#x27;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;            &#125;);\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;        &#125;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;    &lt;/script&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;&lt;/body&gt;\n&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;&lt;/html&gt;&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//3. 监听端口, 启动服务</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动,端口9000监听中...&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// http.createServer 里的回调函数的执行时机： 当接收到 HTTP 请求的时候，就会执行</span></span><br></pre></td></tr></table></figure>



<h2 id="5-4-静态资源服务"><a href="#5-4-静态资源服务" class="headerlink" title="5.4 静态资源服务"></a>5.4 静态资源服务</h2><blockquote>
<p>静态资源是指 内容长时间不发生改变的资源 ，例如图片，视频，CSS文件，JS文件，HTML文件，字体文件等<br>动态资源是指 内容经常更新的资源 ，例如百度首页，网易首页，京东搜索列表页面等</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 导入 http 模块</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">//2. 创建服务对象 create 创建 server 服务</span></span><br><span class="line"><span class="comment">// request 意为请求. 是对请求报文的封装对象, 通过 request 对象可以获得请求报文的数据</span></span><br><span class="line"><span class="comment">// response 意为响应. 是对响应报文的封装对象, 通过 response 对象可以设置响应报文</span></span><br><span class="line"><span class="keyword">var</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>,<span class="string">&#x27;text/html;charset=utf-8&#x27;</span>);</span><br><span class="line">    <span class="comment">//获取请求的方法已经路径</span></span><br><span class="line">    <span class="keyword">let</span> &#123;url,method&#125; = request;</span><br><span class="line"><span class="comment">//文件夹路径</span></span><br><span class="line">    <span class="keyword">let</span> rootDir = __dirname + <span class="string">&#x27;/fileBak&#x27;</span>;</span><br><span class="line"><span class="comment">//拼接文件路径</span></span><br><span class="line">    <span class="keyword">let</span> filePath = rootDir + url;</span><br><span class="line">    fs.<span class="title function_">readFile</span>(filePath,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//判断</span></span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line"><span class="comment">//如果出现错误，响应404状态码</span></span><br><span class="line">            response.<span class="property">statusCode</span> = <span class="number">404</span>;</span><br><span class="line">            response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;h1&gt;404 Not Found&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//响应文件内容</span></span><br><span class="line">            response.<span class="title function_">end</span>(data);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//3. 监听端口, 启动服务</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动,端口9000监听中...&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// http.createServer 里的回调函数的执行时机： 当接收到 HTTP 请求的时候，就会执行</span></span><br></pre></td></tr></table></figure>



<h2 id="5-5-设置资源类型（mime类型）"><a href="#5-5-设置资源类型（mime类型）" class="headerlink" title="5.5 设置资源类型（mime类型）"></a>5.5 设置资源类型（mime类型）</h2><blockquote>
<p>HTTP 服务可以设置响应头 Content-Type 来表明响应体的 MIME 类型,浏览器会根据该类型决定如何处理资源:<br>mime 类型结构： [type]&#x2F;[subType]<br>常见： text&#x2F;html text&#x2F;css image&#x2F;jpeg image&#x2F;png application&#x2F;json</p>
</blockquote>
<blockquote>
<p>对于未知的资源类型，可以选择 application&#x2F;octet-stream 类型，浏览器在遇到该类型的响应<br>时，会对响应体内容进行独立存储，也就是我们常见的 下载 效果</p>
</blockquote>
<h2 id="5-6-GET-和-POST-请求场景小结"><a href="#5-6-GET-和-POST-请求场景小结" class="headerlink" title="5.6 GET 和 POST 请求场景小结"></a>5.6 GET 和 POST 请求场景小结</h2><blockquote>
<p>GET 请求的情况：</p>
<ul>
<li>在地址栏直接输入 url 访问</li>
<li>点击 a 链接</li>
<li>link 标签引入 css</li>
<li>script 标签引入 js</li>
<li>img 标签引入图片</li>
<li>form 标签中的 method 为 get （不区分大小写）</li>
<li>ajax 中的 get 请求</li>
</ul>
</blockquote>
<blockquote>
<p>POST 请求的情况：</p>
<ul>
<li>form 标签中的 method 为 post（不区分大小写）</li>
<li>AJAX 的 post 请求</li>
</ul>
</blockquote>
<h1 id="6-Node-js-模块化"><a href="#6-Node-js-模块化" class="headerlink" title="6.Node.js 模块化"></a>6.Node.js 模块化</h1><h2 id="6-1-介绍"><a href="#6-1-介绍" class="headerlink" title="6.1 介绍"></a>6.1 介绍</h2><ul>
<li>什么是模块化与模块 ?</li>
</ul>
<blockquote>
<p>将一个复杂的程序文件依据一定规则（规范）拆分成多个文件的过程称之为 模块化，其中拆分出的 每个文件就是一个模块 ，模块的内部数据是私有的，不过模块可以暴露内部数据以便其他模块使用</p>
</blockquote>
<ul>
<li>什么是模块化项目 ?</li>
</ul>
<blockquote>
<p>编码时是按照模块一个一个编码的， 整个项目就是一个模块化的项目</p>
</blockquote>
<ul>
<li>模块化好处</li>
</ul>
<blockquote>
<ul>
<li>防止命名冲突</li>
<li>高复用性</li>
<li>高维护性</li>
</ul>
</blockquote>
<h2 id="6-2-初体验"><a href="#6-2-初体验" class="headerlink" title="6.2 初体验"></a>6.2 初体验</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">*******************me.<span class="property">js</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tiemo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;贴膜...&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//暴露数据</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = tiemo;</span><br><span class="line"></span><br><span class="line">*******************index.<span class="property">js</span></span><br><span class="line"><span class="keyword">var</span> tiemo2 = <span class="built_in">require</span>(<span class="string">&#x27;./me&#x27;</span>);</span><br><span class="line"><span class="title function_">tiemo2</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tiemo2);</span><br></pre></td></tr></table></figure>

<p><img src="https://bu.dusays.com/2024/08/25/66ca9a0442673.png" alt="在这里插入图片描述"></p>
<h2 id="6-3-暴漏数据"><a href="#6-3-暴漏数据" class="headerlink" title="6.3 暴漏数据"></a>6.3 暴漏数据</h2><blockquote>
<p>模块暴露数据的方式有两种：</p>
<ol>
<li>module.exports &#x3D; value</li>
<li>exports.name &#x3D; value</li>
</ol>
</blockquote>
<p><img src="https://bu.dusays.com/2024/08/25/66ca9a264d35f.png" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">*******************me.<span class="property">js</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tiemo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;贴膜...&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">niejiao</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;捏脚...&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//暴露数据</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    niejiao,</span><br><span class="line">    tiemo</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">*******************index.<span class="property">js</span></span><br><span class="line"><span class="keyword">var</span> me = <span class="built_in">require</span>(<span class="string">&#x27;./me&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(me)</span><br><span class="line">me.<span class="title function_">niejiao</span>();</span><br></pre></td></tr></table></figure>

<p><img src="https://bu.dusays.com/2024/08/25/66ca9a4e7f813.png" alt="在这里插入图片描述"></p>
<h2 id="6-4-导入模块"><a href="#6-4-导入模块" class="headerlink" title="6.4 导入模块"></a>6.4 导入模块</h2><blockquote>
<p>在模块中使用 require 传入文件路径即可引入文件<br>require 使用的一些注意事项:</p>
<ol>
<li>对于自己创建的模块，导入时路径建议写 相对路径 ，且不能省略 .&#x2F; 和..&#x2F;</li>
<li>js 和 json 文件导入时可以不用写后缀，c&#x2F;c++编写的 node 扩展文件也可以不写后缀，但是一般用不到</li>
<li>如果导入其他类型的文件，会以js文件进行处理</li>
<li>如果导入的路径是个文件夹，则会 首先 检测该文件夹下package.json 文件中 main 属性对应的文件，如果存在则导入，反之如果文件不存在会报错。如果 main 属性不存在，或者 package.json 不存在，则会尝试导入文件夹下的index.js 和index.json，如果还是没找到，就会报错</li>
<li>导入 node.js 内置模块时，直接 require 模块的名字即可，无需加 .&#x2F; 和 ..&#x2F;</li>
</ol>
</blockquote>
<h2 id="6-5-导入自定义模块的基本流程"><a href="#6-5-导入自定义模块的基本流程" class="headerlink" title="6.5 导入自定义模块的基本流程"></a>6.5 导入自定义模块的基本流程</h2><blockquote>
<p>这里我们介绍一下 require 导入 自定义模块 的基本流程</p>
<ol>
<li>将相对路径转为绝对路径，定位目标文件</li>
<li>缓存检测</li>
<li>读取目标文件代码</li>
<li>包裹为一个函数并执行（自执行函数）。通过 arguments.callee.toString() 查看自执行函数</li>
<li>缓存模块的值</li>
<li>返回 module.exports 的值</li>
</ol>
</blockquote>
<h2 id="6-6-CommonJS-规范"><a href="#6-6-CommonJS-规范" class="headerlink" title="6.6 CommonJS 规范"></a>6.6 CommonJS 规范</h2><blockquote>
<p>module.exports 、 exports 以及 require 这些都是 CommonJS 模块化规范中的内容。而 Node.js 是实现了 CommonJS 模块化规范，二者关系有点像 JavaScript 与 ECMAScript</p>
</blockquote>
<h2 id="6-7-ES6模块和CommonJS模块比对"><a href="#6-7-ES6模块和CommonJS模块比对" class="headerlink" title="6.7 ES6模块和CommonJS模块比对"></a>6.7 ES6模块和CommonJS模块比对</h2><blockquote>
<p>在JavaScript中，import和require都是用来导入模块的方式，但它们属于不同的模块系统，并且主要在ES6模块（ECMAScript 2015及以后版本）和CommonJS模块系统中使用。</p>
</blockquote>
<ul>
<li>ES6模块（使用import和export）</li>
</ul>
<blockquote>
<p><strong>语法</strong>：使用import从其他模块导入绑定（变量、函数、类等），使用export导出绑定以便其他模块可以导入。<br>静态结构：import和export的语句在编译时解析，这有助于JavaScript引擎进行更好的静态分析和优化（如树摇（tree-shaking））。<br><strong>语法更简洁</strong>：与CommonJS的require和module.exports相比，import和export的语法更简洁、更直观。<br><strong>默认导出与具名导出</strong>：ES6模块支持默认导出（每个模块只能有一个）和具名导出（可以导出多个）。<br><strong>浏览器支持</strong>：原生支持ES6模块的现代浏览器可以直接使用import和export。</p>
</blockquote>
<ul>
<li>CommonJS模块（使用require和module.exports）</li>
</ul>
<blockquote>
<p><strong>语法</strong>：使用require函数来导入模块，使用module.exports或exports来导出模块中的成员。<br><strong>动态结构</strong>：require函数在运行时执行，这意呀着它可以动态地解析依赖。<br><strong>语法较复杂</strong>：与ES6模块的import和export相比，CommonJS的require和module.exports语法略显复杂。<br><strong>Node.js</strong>：Node.js最初实现了CommonJS模块规范，但自Node.js v12起，它开始原生支持ES6模块（尽管需要通过特定的配置或使用.mjs扩展名）。</p>
</blockquote>
<ul>
<li>区别总结</li>
</ul>
<blockquote>
<p><strong>语法</strong>：import&#x2F;export vs require&#x2F;module.exports&#x2F;exports。<br><strong>静态与动态</strong>：ES6模块是静态的，CommonJS模块是动态的。<br><strong>浏览器支持</strong>：ES6模块在现代浏览器中受到原生支持，而CommonJS模块主要用于Node.js环境（尽管可以通过工具如Browserify或Webpack在浏览器中使用）。<br><strong>使用场景</strong>：新项目倾向于使用ES6模块，因为它们提供了更好的静态分析、更简洁的语法和更广泛的浏览器支持。然而，由于Node.js的广泛使用和大量现有代码库的存在，CommonJS模块仍然非常普遍。</p>
</blockquote>
<ul>
<li>混用</li>
</ul>
<blockquote>
<p>在Node.js中，你可以通过特定的配置（如type: “module”在package.json中）来让项目支持ES6模块，但这意味着你需要将所有模块都迁移到ES6模块语法。然而，在单个项目中混用ES6模块和CommonJS模块通常是不推荐的，因为它可能会导致意外的行为和不一致性。</p>
</blockquote>
<h2 id="6-8-ES6暴漏数据"><a href="#6-8-ES6暴漏数据" class="headerlink" title="6.8 ES6暴漏数据"></a>6.8 ES6暴漏数据</h2><blockquote>
<p>在ES6模块中，你可以使用export关键字来导出函数、对象或原始值，以便其他模块可以使用它们。有两种主要的导出方式：默认导出（每个模块只能有一个）和具名导出（可以导出多个）</p>
</blockquote>
<ul>
<li>默认导出</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- <span class="comment">// math.js  </span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a, b</span>) &#123;  </span><br><span class="line">    <span class="keyword">return</span> a + b;  </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>具名导出</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// math-utils.js  </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">multiply</span>(<span class="params">a, b</span>) &#123;  </span><br><span class="line">  <span class="keyword">return</span> a * b;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">subtract</span>(<span class="params">a, b</span>) &#123;  </span><br><span class="line">  <span class="keyword">return</span> a - b;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>导入默认导出</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js  </span></span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&#x27;./math.js&#x27;</span>;  </span><br><span class="line"><span class="comment">//等价于，import &#123; default as xxx &#125; from &quot;/xxx&quot;，默认暴漏相当于&#123; default : a &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// 输出: 5</span></span><br></pre></td></tr></table></figure>

<ul>
<li>导入具名导出</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js  </span></span><br><span class="line"><span class="keyword">import</span> &#123; multiply, subtract &#125; <span class="keyword">from</span> <span class="string">&#x27;./math-utils.js&#x27;</span>;  </span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">multiply</span>(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// 输出: 6  </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">subtract</span>(<span class="number">5</span>, <span class="number">3</span>)); <span class="comment">// 输出: 2</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>你也可以使用as关键字为导入的绑定重命名：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; multiply <span class="keyword">as</span> mul, subtract &#125; <span class="keyword">from</span> <span class="string">&#x27;./math-utils.js&#x27;</span>;  </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">mul</span>(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// 输出: 6</span></span><br></pre></td></tr></table></figure>

<ul>
<li>导入整个模块</li>
</ul>
<blockquote>
<p>虽然不常见，但你也可以使用星号（*）语法来导入整个模块的内容，但这通常会导致命名冲突，因此不推荐这样做。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意：不推荐这样做，因为它会将math-utils.js中导出的所有内容导入到一个名为mathUtils的对象中  </span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> mathUtils <span class="keyword">from</span> <span class="string">&#x27;./math-utils.js&#x27;</span>;  </span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mathUtils.<span class="title function_">multiply</span>(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// 输出: 6</span></span><br></pre></td></tr></table></figure>

<h2 id="6-9-暴漏数据注意事项"><a href="#6-9-暴漏数据注意事项" class="headerlink" title="6.9 暴漏数据注意事项"></a>6.9 暴漏数据注意事项</h2><blockquote>
<p>浏览器默认不支持ES6模块和commonjs模块</p>
<p>在使用ES6模块时，请确保你的环境（如浏览器或Node.js）支持它们。<br>在Node.js中，你需要将文件扩展名从.js更改为.mjs，或者在package.json中设置”type”: “module”，以便Node.js将.js文件作为ES6模块处理。<br>ES6模块是静态解析的，这意味着在编译时就会确定模块的依赖关系，这有助于进行静态分析和优化（如树摇）。<br>与CommonJS模块不同，ES6模块中的代码只会在被导入时执行一次（即，模块是单例的）。<br>浏览器通过 <code>&lt;script type=&quot;module&quot;&gt;</code> 标签来识别和处理 ES6 模块。如果你只是使用 <code>&lt;script&gt;</code> 标签而不指定 type&#x3D;”module”，那么浏览器会将其视为传统的脚本，并忽略 ES6 模块的特性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;module&quot;</span>&gt;  </span><br><span class="line">    <span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&#x27;./me.js&#x27;</span>;  </span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>));  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>type&#x3D;”module” 是 HTML <code>&lt;script&gt;</code>标签的一个属性，它告诉浏览器该 <code>&lt;script&gt;</code> 标签包含的是一个 JavaScript ES6 模块。在 HTML 文档中引入 JavaScript 代码时，通常使用 <code>&lt;script&gt;</code>标签，而默认情况下，浏览器会将</p>
</blockquote>
<h1 id="7-包管理"><a href="#7-包管理" class="headerlink" title="7 包管理"></a>7 包管理</h1><h2 id="7-1-介绍"><a href="#7-1-介绍" class="headerlink" title="7.1 介绍"></a>7.1 介绍</h2><ul>
<li>包是什么</li>
</ul>
<blockquote>
<p>『包』英文单词是 package ，代表了一组特定功能的源码集合</p>
</blockquote>
<ul>
<li>包管理工具</li>
</ul>
<blockquote>
<p>管理『包』的应用软件，可以对「包」进行 下载安装 ， 更新 ， 删除 ， 上传 等操作借助包管理&gt;工具，可以快速开发项目，提升开发效率包管理工具是一个通用的概念，很多编程语言都有包管理工具，所以 掌握好包管理工具非常重要</p>
</blockquote>
<ul>
<li><p>常用的包管理工具</p>
<blockquote>
<p>下面列举了前端常用的包管理工具<br>npm<br>yarn<br>cnpm</p>
</blockquote>
</li>
</ul>
<h2 id="7-2-npm"><a href="#7-2-npm" class="headerlink" title="7.2 npm"></a>7.2 npm</h2><blockquote>
<p>npm 全称 Node Package Manager，翻译为中文意思是『Node 的包管理工具』<br>npm 是 node.js 官方内置的包管理工具，是 必须要掌握住的工具</p>
</blockquote>
<h3 id="7-2-1-npm的安装-npm-v"><a href="#7-2-1-npm的安装-npm-v" class="headerlink" title="7.2.1 npm的安装 npm -v"></a>7.2.1 npm的安装 npm -v</h3><p>node.js 在安装时会 自动安装 npm ，所以如果你已经安装了 node.js，可以直接使用 npm<br>可以通过 npm -v 查看版本号测试，如果显示版本号说明安装成功，反之安装失败</p>
<h3 id="7-2-2-初始化-npm-init-下载包前要初始化"><a href="#7-2-2-初始化-npm-init-下载包前要初始化" class="headerlink" title="7.2.2 初始化: npm init (下载包前要初始化)"></a>7.2.2 初始化: npm init (下载包前要初始化)</h3><p>创建一个空目录，然后以此目录作为工作目录 启动命令行工具 ，执行 npm init</p>
<blockquote>
<p>npm init 命令的作用是将文件夹初始化为一个『包』， 交互式创建 package.json 文件<br>package.json 是包的配置文件，每个包都必须要有 package.json<br>package.json 内容示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;1-npm&quot;</span>, #包的名字 </span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>, #包的版本</span><br><span class="line">     <span class="string">&quot;description&quot;</span>: <span class="string">&quot;&quot;</span>, #包的描述</span><br><span class="line">    <span class="string">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>, #包的入口文件</span><br><span class="line">    <span class="string">&quot;scripts&quot;</span>: &#123; #脚本配置</span><br><span class="line">      <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;author&quot;</span>: <span class="string">&quot;&quot;</span>, #作者</span><br><span class="line">    <span class="string">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span> #开源证书</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>初始化的过程中还有一些注意事项：</p>
<ol>
<li>package name ( 包名 ) 不能使用中文、大写，默认值是 文件夹的名称 ，所以文件夹名称也不能使用中文和大写</li>
<li>version ( 版本号 )要求 x.x.x 的形式定义，x必须是数字，默认值是 1.0.0</li>
<li>ISC 证书与 MIT 证书功能上是相同的，关于开源证书扩展阅读 <a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html">http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html</a></li>
<li>package.json 可以手动创建与修改</li>
<li>使用 npm init -y 或者 npm init –yes 极速创建 package.json</li>
</ol>
</blockquote>
<h3 id="7-2-3-搜索包"><a href="#7-2-3-搜索包" class="headerlink" title="7.2.3 搜索包"></a>7.2.3 搜索包</h3><ul>
<li>搜索包的方式有两种</li>
</ul>
<blockquote>
<ol>
<li>命令行『npm s&#x2F;search 关键字』 eg:npm s uniq</li>
<li>网站搜索 网址是 <a target="_blank" rel="noopener" href="https://www.npmjs.com/">https://www.npmjs.com/</a></li>
</ol>
</blockquote>
<h3 id="7-2-4-下载-删除安装包"><a href="#7-2-4-下载-删除安装包" class="headerlink" title="7.2.4 下载&amp;删除安装包"></a>7.2.4 下载&amp;删除安装包</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">## 格式</span><br><span class="line">npm install &lt;包名&gt; <span class="string">`(多个包可以用空格分隔开)`</span></span><br><span class="line">npm i &lt;包名&gt; <span class="string">`(多个包可以用空格分隔开)`</span></span><br><span class="line"></span><br><span class="line">## 示例</span><br><span class="line">npm install uniq</span><br><span class="line">npm i uniq</span><br><span class="line"></span><br><span class="line">## 指定版本号</span><br><span class="line">## 格式</span><br><span class="line">npm i &lt;包名@版本号&gt;</span><br><span class="line"></span><br><span class="line">## 示例</span><br><span class="line">npm i jquery@<span class="number">1.11</span><span class="number">.2</span></span><br><span class="line"></span><br><span class="line">## 局部删除</span><br><span class="line">npm remove uniq</span><br><span class="line">npm r uniq</span><br><span class="line">## 全局删除</span><br><span class="line">npm remove -g nodemon</span><br></pre></td></tr></table></figure>




<p>运行之后文件夹下会增加两个资源</p>
<ul>
<li>node_modules 文件夹 存放下载的包</li>
<li>package-lock.json 包的锁文件 ，用来锁定包的版本</li>
</ul>
<blockquote>
<p>安装 uniq 之后， uniq 就是当前这个包的一个 依赖包 ，有时会简称为 依赖<br>比如我们创建一个包名字为 A，A 中安装了包名字是 B，我们就说 B 是 A 的一个依赖包 ，也会说<br>A 依赖 B</p>
</blockquote>
<h4 id="7-2-4-1-安装包报错处理"><a href="#7-2-4-1-安装包报错处理" class="headerlink" title="7.2.4.1 安装包报错处理"></a>7.2.4.1 安装包报错处理</h4><ul>
<li>ssl认证问题</li>
</ul>
<blockquote>
<p><img src="https://bu.dusays.com/2024/08/25/66ca9d5aac2d9.png" alt="在这里插入图片描述"></p>
<p>npm set strict-ssl&#x3D;false</p>
</blockquote>
<h3 id="7-2-5-require-导入-npm-包基本流程"><a href="#7-2-5-require-导入-npm-包基本流程" class="headerlink" title="7.2.5 require 导入 npm 包基本流程"></a>7.2.5 require 导入 npm 包基本流程</h3><blockquote>
<p>在当前文件夹下 node_modules 中寻找同名的文件夹<br>在上级目录中下的 node_modules 中寻找同名的文件夹，直至找到磁盘根目录</p>
</blockquote>
<p>总结</p>
<blockquote>
<ul>
<li>require导入内置模块 require(‘http’)</li>
<li>require导入自定义模块require(‘.&#x2F;aa.js’)</li>
<li>require导入npm包 require(‘uniq’)</li>
</ul>
</blockquote>
<h3 id="7-2-6-生产环境与开发环境"><a href="#7-2-6-生产环境与开发环境" class="headerlink" title="7.2.6 生产环境与开发环境"></a>7.2.6 生产环境与开发环境</h3><blockquote>
<p>开发环境是程序员 专门用来写代码 的环境，一般是指程序员的电脑，开发环境的项目一般 只能程序员自己访问<br>生产环境是项目 代码正式运行 的环境，一般是指正式的服务器电脑，生产环境的项目一般 每个客户都可以访问</p>
</blockquote>
<h3 id="7-2-7-生产依赖与开发依赖"><a href="#7-2-7-生产依赖与开发依赖" class="headerlink" title="7.2.7 生产依赖与开发依赖"></a>7.2.7 生产依赖与开发依赖</h3><p>我们可以在安装时设置选项来区分 依赖的类型 ，目前分为两类：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>命令</th>
<th>补充</th>
</tr>
</thead>
<tbody><tr>
<td>生产依赖</td>
<td>npm i -S uniq<br />npm i -S uniq</td>
<td>-S 等效于 –save，<code> -S 是默认选项</code><br/>包信息保存在 package.json 中 <code>dependencies</code> 属性</td>
</tr>
<tr>
<td>开发依赖</td>
<td>npm i -D less<br/>npm i –save-dev less</td>
<td>-D 等效于 –save-dev<br/>包信息保存在 package.json 中 <code>devDependencies</code> 属性</td>
</tr>
</tbody></table>
<blockquote>
<p>举个例子方便大家理解，比如说做蛋炒饭需要 大米 ， 油 ， 葱 ， 鸡蛋 ， 锅 ， 煤气 ， 铲子 等<br>其中 锅 ， 煤气 ， 铲子 属于开发依赖，只在制作阶段使用<br>而 大米 ， 油 ， 葱 ， 鸡蛋 属于生产依赖，在制作与最终食用都会用到<br>所以 开发依赖 是只在开发阶段使用的依赖包，而 生产依赖 是开发阶段和最终上线运行阶段都用到<br>的依赖包</p>
</blockquote>
<h3 id="7-2-8-全局安装"><a href="#7-2-8-全局安装" class="headerlink" title="7.2.8 全局安装"></a>7.2.8 全局安装</h3><p>我们可以执行安装选项 -g 进行全局安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g nodemon # nodemon  http.js 热启动命令</span><br></pre></td></tr></table></figure>



<blockquote>
<p>注意,也可以局部安装,但是使用nodemon需要使用 npx nodemon http.js临时运行安装在项目中的 nodemon，而不需要全局安装</p>
</blockquote>
<blockquote>
<p>全局安装完成之后就可以在命令行的任何位置运行 nodemon 命令，该命令的作用是 自动重启 node 应用程序<br>说明：<br>全局安装的命令不受工作目录位置影响<br>可以通过 npm root -g 可以查看全局安装包的位置<br>不是所有的包都适合全局安装 ， 只有全局类的工具才适合，可以通过 查看包的官方文档来确定<br>安装方式 ，这里先不必太纠结</p>
</blockquote>
<h3 id="7-2-9-安装包依赖"><a href="#7-2-9-安装包依赖" class="headerlink" title="7.2.9 安装包依赖"></a>7.2.9 安装包依赖</h3><p>在项目协作中有一个常用的命令就是 npm i ，通过该命令可以依据 package.json 和 package-lock.json 的依赖声明安装项目依赖<br>node_modules 文件夹大多数情况都不会存入版本库</p>
<blockquote>
<p>npm i<br>npm install</p>
</blockquote>
<h3 id="7-2-10-安装指定版本的包"><a href="#7-2-10-安装指定版本的包" class="headerlink" title="7.2.10 安装指定版本的包"></a>7.2.10 安装指定版本的包</h3><p>项目中可能会遇到版本不匹配的情况，有时就需要安装指定版本的包，可以使用下面的命令的</p>
<blockquote>
<p>npm i &lt;包名@版本号&gt;<br>npm i <a href="mailto:&#x6a;&#113;&#117;&#101;&#114;&#x79;&#64;&#x31;&#46;&#x31;&#49;&#x2e;&#50;">&#x6a;&#113;&#117;&#101;&#114;&#x79;&#64;&#x31;&#46;&#x31;&#49;&#x2e;&#50;</a></p>
</blockquote>
<h3 id="7-2-11-配置命令别名"><a href="#7-2-11-配置命令别名" class="headerlink" title="7.2.11 配置命令别名"></a>7.2.11 配置命令别名</h3><p>通过配置命令别名可以更简单的执行命令<br>配置 package.json 中的 scripts 属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;server&quot;</span>: <span class="string">&quot;node server.js&quot;</span>,</span><br><span class="line"><span class="string">&quot;start&quot;</span>: <span class="string">&quot;node index.js&quot;</span>,</span><br><span class="line">&#125;,</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置完成之后，可以使用别名执行命令</li>
</ul>
<blockquote>
<p>npm run server<br>npm run start<br>不过 start 别名比较特别，使用时可以省略 run<br>npm start<br>补充说明：<br>npm start 是项目中常用的一个命令，一般用来启动项目<br>npm run 有自动向上级目录查找的特性，跟 require 函数也一样<br>对于陌生的项目，我们可以通过查看 scripts 属性来参考项目的一些操作</p>
</blockquote>
<h3 id="7-2-12-安装cnpm"><a href="#7-2-12-安装cnpm" class="headerlink" title="7.2.12 安装cnpm"></a>7.2.12 安装cnpm</h3><ul>
<li>方式一:通过 npm 来安装 cnpm 工具</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 直接安装cnpm命令， 原来npm命令并不变，使用cnpm才会去淘宝进行加载</span><br><span class="line">npm install -g cnpm --registry=https://registry.npmmirror.com</span><br><span class="line"></span><br><span class="line"># 命令和npm一样，  </span><br><span class="line"># 初始化：cnpm init; </span><br><span class="line"># 安装： cnpm i uniq; </span><br><span class="line"># 删除： cnpm r uniq;</span><br></pre></td></tr></table></figure>



<ul>
<li>方式二:npm 配置淘宝镜像 (npm配置淘宝镜像比cnpm命令快一些)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 修改npm的镜像配置--直接配置（使用npm即用的淘宝镜像）</span><br><span class="line"></span><br><span class="line">npm config set registry https://registry.npmmirror.com/</span><br><span class="line"></span><br><span class="line"># 修改npm的镜像配置--工具配置（使用npm即用的淘宝镜像）</span><br><span class="line"></span><br><span class="line">npm i -g nrm #安装 nrm</span><br><span class="line">nrm use taobao #修改镜像</span><br><span class="line">npm config list #检查是否配置成功（选做） 检查 registry 地址是否为 https://registry.npmmirror.com/ , 如果 是 则表明成功</span><br><span class="line">nrm ls #也可查看， *号的是当前镜像链接</span><br></pre></td></tr></table></figure>

<ul>
<li>方式三:npm 使用工具进行切换(nrm)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- npm install -g nrm</span><br><span class="line"></span><br><span class="line">nrm ls   //查看镜像源, *表示正在使用的</span><br><span class="line"></span><br><span class="line">  npm ---------- https://registry.npmjs.org/</span><br><span class="line">  yarn --------- https://registry.yarnpkg.com/</span><br><span class="line">  tencent ------ https://mirrors.cloud.tencent.com/npm/</span><br><span class="line">  cnpm --------- https://r.cnpmjs.org/</span><br><span class="line"></span><br><span class="line">* taobao ------- https://registry.npmmirror.com/</span><br><span class="line">  npmMirror ---- https://skimdb.npmjs.com/registry/</span><br><span class="line"></span><br><span class="line">nrm use taobao //切换</span><br></pre></td></tr></table></figure>

<blockquote>
<p>补充说明：</p>
<p>建议使用第二种方式 进行镜像配置，因为后续修改起来会比较方便<br>虽然 cnpm 可以提高速度，但是 npm 也可以通过淘宝镜像进行加速，所以 npm 的使用率还 是高于 cnpm</p>
</blockquote>
<h2 id="7-3-yarn"><a href="#7-3-yarn" class="headerlink" title="7.3 yarn"></a>7.3 yarn</h2><h3 id="7-3-1-yarn介绍"><a href="#7-3-1-yarn介绍" class="headerlink" title="7.3.1 yarn介绍"></a>7.3.1 yarn介绍</h3><blockquote>
<p>yarn 是由 Facebook 在 2016 年推出的新的 Javascript 包管理工具，官方网址： <a target="_blank" rel="noopener" href="https://yarnpkg.com/">https://yarnpkg.com/</a></p>
</blockquote>
<ul>
<li>yarn特点</li>
</ul>
<blockquote>
<p>yarn 官方宣称的一些特点</p>
<ul>
<li>速度超快：yarn 缓存了每个下载过的包，所以再次使用时无需重复下载。 同时利用并行下载以最大化资源利用率，因此安装速度更快</li>
<li>超级安全：在执行代码之前，yarn 会通过算法校验每个安装包的完整性</li>
<li>超级可靠：使用详细、简洁的锁文件格式和明确的安装算法，yarn 能够保证在不同系统上无差异的工作</li>
</ul>
</blockquote>
<h3 id="7-3-2-yarn安装"><a href="#7-3-2-yarn安装" class="headerlink" title="7.3.2 yarn安装"></a>7.3.2 yarn安装</h3><blockquote>
<p>我们可以使用 npm 安装 yarn<br><code>npm i -g yarn</code></p>
</blockquote>
<h3 id="7-3-3-yarn常用命令"><a href="#7-3-3-yarn常用命令" class="headerlink" title="7.3.3 yarn常用命令"></a>7.3.3 yarn常用命令</h3><table>
<thead>
<tr>
<th>功能</th>
<th>命令</th>
</tr>
</thead>
<tbody><tr>
<td>初始化</td>
<td>yarn init &#x2F; yarn init -y</td>
</tr>
<tr>
<td>安装包</td>
<td>yarn add uniq 生产依赖<br/>yarn add less –dev 开发依赖<br/>yarn global add nodemon 全局安装</td>
</tr>
<tr>
<td>删除包</td>
<td>yarn remove uniq 删除项目依赖包<br/>yarn global remove nodemon 全局删除包</td>
</tr>
<tr>
<td>安装项目依赖</td>
<td>yarn</td>
</tr>
<tr>
<td>运行命令别名</td>
<td>yarn &lt;别名&gt; # 不需要添加<code> run</code></td>
</tr>
</tbody></table>
<h3 id="7-3-4-yarn-配置淘宝镜像"><a href="#7-3-4-yarn-配置淘宝镜像" class="headerlink" title="7.3.4 yarn 配置淘宝镜像"></a>7.3.4 yarn 配置淘宝镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn config set registry https://registry.npmmirror.com/</span><br><span class="line">#可以通过 yarn config list 查看 yarn 的配置项</span><br></pre></td></tr></table></figure>

<h2 id="7-4-npm-和-yarn-选择"><a href="#7-4-npm-和-yarn-选择" class="headerlink" title="7.4 npm 和 yarn 选择"></a>7.4 npm 和 yarn 选择</h2><p>大家可以根据不同的场景进行选择</p>
<blockquote>
<ol>
<li>个人项目<br>如果是个人项目， 哪个工具都可以 ，可以根据自己的喜好来选择</li>
<li>公司项目<br>如果是公司要根据项目代码来选择，可以通过锁文件判断 项目的包管理工具<br>npm 的锁文件为 package-lock.json<br>yarn 的锁文件为 yarn.lock<br>包管理工具 不要混着用，切记，切记，切记</li>
</ol>
</blockquote>
<h2 id="7-6-发布包"><a href="#7-6-发布包" class="headerlink" title="7.6 发布包"></a>7.6 发布包</h2><p>我们可以将自己开发的工具包发布到 npm 服务上，方便自己和其他开发者使用，操作步骤如下：</p>
<blockquote>
<ol>
<li>创建文件夹，并创建文件 index.js， 在文件中声明函数，使用 module.exports 暴露</li>
<li>npm 初始化工具包，package.json 填写包的信息 (包的名字是唯一的)</li>
<li>注册账号 <a target="_blank" rel="noopener" href="https://www.npmjs.com/signup">https://www.npmjs.com/signup</a></li>
<li>激活账号 （ 一定要激活账号 ）(chenyj123)</li>
<li>修改为官方的官方镜像 (命令行中运行 <code>nrm use npm</code> )</li>
<li>命令行下 npm login 填写相关用户信息</li>
<li>命令行下 npm publish 提交包 👌 (chenyj_math)</li>
</ol>
</blockquote>
<h2 id="7-7-更新包"><a href="#7-7-更新包" class="headerlink" title="7.7 更新包"></a>7.7 更新包</h2><p>后续可以对自己发布的包进行更新，操作步骤如下</p>
<blockquote>
<ol>
<li>更新包中的代码</li>
<li>测试代码是否可用</li>
<li>修改 package.json 中的版本号 (一定要修改,远端已经存在之前版本,也可删除重新发布)</li>
<li>发布更新 (npm publish)</li>
</ol>
</blockquote>
<h2 id="7-8-删除包"><a href="#7-8-删除包" class="headerlink" title="7.8 删除包"></a>7.8 删除包</h2><p>执行如下命令删除包</p>
<blockquote>
<p>npm unpublish –force</p>
</blockquote>
<blockquote>
<p>删除包需要满足一定的条件，<br><a target="_blank" rel="noopener" href="https://docs.npmjs.com/policies/unpublish">https://docs.npmjs.com/policies/unpublish</a><br>你是包的作者<br>发布小于 24 小时<br>大于 24 小时后，没有其他包依赖，并且每周小于 300 下载量，并且只有一个维护者 (写的哪个版本,就会删除哪个版本)</p>
</blockquote>
<h2 id="7-9-扩展内容"><a href="#7-9-扩展内容" class="headerlink" title="7.9 扩展内容"></a>7.9 扩展内容</h2><p>在很多语言中都有包管理工具，比如：</p>
<p><img src="https://bu.dusays.com/2024/08/25/66cb0ed7cfff1.png" alt="在这里插入图片描述"></p>
<p>除了编程语言领域有包管理工具之外，操作系统层面也存在包管理工具，不过这个包指的是『 软件包 』</p>
<p><img src="https://bu.dusays.com/2024/08/25/66cb0edd92f04.png" alt="在这里插入图片描述"></p>
<h1 id="8-nvm"><a href="#8-nvm" class="headerlink" title="8.nvm"></a>8.nvm</h1><h2 id="8-1-介绍-安装使用"><a href="#8-1-介绍-安装使用" class="headerlink" title="8.1 介绍&amp;安装使用"></a>8.1 介绍&amp;安装使用</h2><ul>
<li><p>nvm 全称 Node Version Manager 顾名思义它是用来管理 node 版本的工具，方便切换不同版本的Node.js</p>
</li>
<li><p>nvm 的使用非常的简单，跟 npm 的使用方法类似</p>
</li>
<li><p>下载安装</p>
<blockquote>
<p>首先先下载 nvm，下载地址 <a target="_blank" rel="noopener" href="https://github.com/coreybutler/nvm-windows/releases">https://github.com/coreybutler/nvm-windows/releases</a> ，<br>选择 nvm-setup.exe 下载即可（网络异常的小朋友可以在资料文件夹中获取）<br>切换镜像源:<br>nvm node_mirror <a target="_blank" rel="noopener" href="https://npmmirror.com/mirrors/node/">https://npmmirror.com/mirrors/node/</a><br>nvm npm_mirror <a target="_blank" rel="noopener" href="https://npmmirror.com/mirrors/npm/">https://npmmirror.com/mirrors/npm/</a></p>
<p><img src="https://bu.dusays.com/2024/08/25/66cb0f1a174f5.png" alt="在这里插入图片描述"></p>
</blockquote>
</li>
</ul>
<h2 id="8-2-常用命令"><a href="#8-2-常用命令" class="headerlink" title="8.2 常用命令"></a>8.2 常用命令</h2><p><img src="https://bu.dusays.com/2024/08/25/66cb0f291cb9a.png" alt="在这里插入图片描述"></p>
<h1 id="9-express"><a href="#9-express" class="headerlink" title="9.express"></a>9.express</h1><h2 id="9-1-express-介绍"><a href="#9-1-express-介绍" class="headerlink" title="9.1 express 介绍"></a>9.1 express 介绍</h2><blockquote>
<p>express 是一个基于 Node.js 平台的极简、灵活的 WEB 应用开发框架，官方网址： <a target="_blank" rel="noopener" href="https://www.expressjs.com.cn/">https://www.expressjs.com.cn/</a><br>简单来说，express 是一个封装好的工具包，封装了很多功能，便于我们开发 WEB 应用（HTTP 服务）</p>
</blockquote>
<h2 id="9-2-express-使用"><a href="#9-2-express-使用" class="headerlink" title="9.2 express 使用"></a>9.2 express 使用</h2><h3 id="9-2-1-初体验"><a href="#9-2-1-初体验" class="headerlink" title="9.2.1 初体验"></a>9.2.1 初体验</h3><ul>
<li>下载</li>
</ul>
<blockquote>
<p>express 本身是一个 npm 包，所以可以通过 npm 安装<br>npm init<br>npm i express</p>
</blockquote>
<ul>
<li>js代码</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//创建应用</span></span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//创建路由规则</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/home&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人请求服务器1了&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">end</span>(<span class="string">&#x27;hello express server&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 监听端口 启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动, 端口监听为 3000...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>启动</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`node &lt;文件名&gt;`</span></span><br><span class="line">或者</span><br><span class="line"><span class="string">`nodemon &lt;文件名&gt;`</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>然后在浏览器就可以访问 <a target="_blank" rel="noopener" href="http://127.0.0.1:3000/home">http://127.0.0.1:3000/home</a> 👌</p>
</li>
</ul>
<h3 id="9-2-2-express-路由"><a href="#9-2-2-express-路由" class="headerlink" title="9.2.2 express 路由"></a>9.2.2 express 路由</h3><blockquote>
<p>官方定义： 路由确定了应用程序如何响应客户端对特定端点的请求<br>一个路由的组成有 请求方法 ， 路径 和 回调函数 组成<br>express 中提供了一系列方法，可以很方便的使用路由，使用格式如下：app.<method>(path，callback)</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//创建应用</span></span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//创建路由规则</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/home&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人请求home页了&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;hello express server&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人请求shou页了&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;hello express server&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//创建 post 路由</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;登录成功&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//匹配所有的请求方法</span></span><br><span class="line"> app.<span class="title function_">get</span>(<span class="string">&#x27;/search&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人请求search页了&#x27;</span>);</span><br><span class="line">     res.<span class="title function_">send</span>(<span class="string">&#x27;hello express server&#x27;</span>);</span><br><span class="line"> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//匹配所有的请求方法</span></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;/search2&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;1 秒钟为您找到相关结果约 100,000,000 个&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//自定义 404 路由 ,应该放在最下面,路由会从上到下匹配</span></span><br><span class="line"> app.<span class="title function_">get</span>(<span class="string">&#x27;*&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">     res.<span class="title function_">send</span>(<span class="string">&#x27;&lt;h1&gt;404 Not Found&lt;/h1&gt;&#x27;</span>);</span><br><span class="line"> &#125;); </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听端口 启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动, 端口监听为 3000...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>注意:验证post的方法,目前已知有ajax 及 表单,验证html如下</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>home<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:3000/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-2-3-获取请求参数"><a href="#9-2-3-获取请求参数" class="headerlink" title="9.2.3 获取请求参数"></a>9.2.3 获取请求参数</h3><p>express 框架封装了一些 API 来方便获取请求报文中的数据，并且兼容原生 HTTP 模块的获取方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/login&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人请求login页了&#x27;</span>);</span><br><span class="line">    <span class="comment">// 1. 获取报文的方式与原生 HTTP 获取方式是兼容的 【原生操作】</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">method</span>);<span class="comment">//GET</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">url</span>);<span class="comment">// //login?username=sadasd</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">httpVersion</span>);<span class="comment">// 1.1</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">headers</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. express 独有的获取报文的方式 【express独有操作】</span></span><br><span class="line">    <span class="comment">//获取查询字符串</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">path</span>)<span class="comment">//『相对重要』 /login 等价于：require(&#x27;url&#x27;).parse(request.url).pathname</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">query</span>)<span class="comment">//『相对重要』&#123; username: &#x27;sadasd&#x27; &#125; 等价于：require(&#x27;url&#x27;).parse(request.url，true).query</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">params</span>.<span class="property">username</span>)<span class="comment">//『相对重要』&#123; username: &#x27;sadasd&#x27; &#125;</span></span><br><span class="line">    <span class="comment">// 获取指定的请求头</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="title function_">get</span>(<span class="string">&#x27;host&#x27;</span>));</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;请求报文的获取&#x27;</span>);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="9-2-4-获取路由参数"><a href="#9-2-4-获取路由参数" class="headerlink" title="9.2.4 获取路由参数"></a>9.2.4 获取路由参数</h3><p>eg:<a target="_blank" rel="noopener" href="https://npcitem.jd.hk/10051796795661.html">https://npcitem.jd.hk/10051796795661.html</a> , 取得10051796795661参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//创建应用</span></span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">// eg: https://npcitem.jd.hk/10051796795661.html</span></span><br><span class="line"><span class="comment">//创建路由规则</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/:id.html&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人请求home页了&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;商品详情, 商品 id 为&#x27;</span>+req.<span class="property">params</span>.<span class="property">id</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听端口 启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动, 端口监听为 3000...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="9-2-5-相应设置参数"><a href="#9-2-5-相应设置参数" class="headerlink" title="9.2.5 相应设置参数"></a>9.2.5 相应设置参数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取请求的路由规则</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/response&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//1. express 中设置响应的方式兼容 HTTP 模块的方式</span></span><br><span class="line">res.<span class="property">statusCode</span> = <span class="number">404</span>;</span><br><span class="line">res.<span class="property">statusMessage</span> = <span class="string">&#x27;xxx&#x27;</span>;</span><br><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;xyz&#x27;</span>);</span><br><span class="line">res.<span class="title function_">write</span>(<span class="string">&#x27;响应体&#x27;</span>);</span><br><span class="line">res.<span class="title function_">end</span>(<span class="string">&#x27;xxx&#x27;</span>);</span><br><span class="line"><span class="comment">//2. express 的响应方法</span></span><br><span class="line">res.<span class="title function_">status</span>(<span class="number">500</span>); <span class="comment">//设置响应状态码</span></span><br><span class="line">res.<span class="title function_">set</span>(<span class="string">&#x27;xxx&#x27;</span>,<span class="string">&#x27;yyy&#x27;</span>);<span class="comment">//设置响应头</span></span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;中文响应不乱码&#x27;</span>);<span class="comment">//设置响应体</span></span><br><span class="line"><span class="comment">//连贯操作</span></span><br><span class="line">res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">set</span>(<span class="string">&#x27;xxx&#x27;</span>,<span class="string">&#x27;yyy&#x27;</span>).<span class="title function_">send</span>(<span class="string">&#x27;你好朋友&#x27;</span>)</span><br><span class="line"><span class="comment">//3. 其他响应</span></span><br><span class="line">res.<span class="title function_">redirect</span>(<span class="string">&#x27;http://atguigu.com&#x27;</span>)<span class="comment">//重定向</span></span><br><span class="line">res.<span class="title function_">download</span>(<span class="string">&#x27;./package.json&#x27;</span>);<span class="comment">//下载响应</span></span><br><span class="line">res.<span class="title function_">json</span>();<span class="comment">//响应 JSON</span></span><br><span class="line">res.<span class="title function_">sendFile</span>(__dirname + <span class="string">&#x27;/home.html&#x27;</span>) <span class="comment">//响应文件内容 只接受绝对路径作为参数，因此不能直接使用相对路径。</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="9-3-express-中间件"><a href="#9-3-express-中间件" class="headerlink" title="9.3 express 中间件"></a>9.3 express 中间件</h2><p>中间件（Middleware）本质是一个回调函数<br>中间件函数 可以像路由回调一样访问 请求对象（request） ， 响应对象（response）<br>中间件的作用 就是 使用函数封装公共操作，简化代码</p>
<h3 id="9-3-1-定义全局中间件"><a href="#9-3-1-定义全局中间件" class="headerlink" title="9.3.1 定义全局中间件"></a>9.3.1 定义全局中间件</h3><p>每一个请求 到达服务端之后 都会执行全局中间件函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> recordMiddleware = <span class="keyword">function</span>(<span class="params">request,response,next</span>)&#123;</span><br><span class="line"><span class="comment">//实现功能代码</span></span><br><span class="line"><span class="comment">//.....</span></span><br><span class="line"><span class="comment">//执行next函数(当如果希望执行完中间件函数之后，仍然继续执行路由中的回调函数，必须调用next)</span></span><br><span class="line"><span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br><span class="line">#应用中间件</span><br><span class="line">app.<span class="title function_">use</span>(recordMiddleware);</span><br></pre></td></tr></table></figure>

<p><img src="https://bu.dusays.com/2024/08/25/66cb107ec08c6.png" alt="在这里插入图片描述"></p>
<h3 id="9-3-2-多个全局中间件"><a href="#9-3-2-多个全局中间件" class="headerlink" title="9.3.2 多个全局中间件"></a>9.3.2 多个全局中间件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">request, response, next</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;定义第一个中间件&#x27;</span>);</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">request, response, next</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;定义第二个中间件&#x27;</span>);</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="9-3-3-定义路由中间件"><a href="#9-3-3-定义路由中间件" class="headerlink" title="9.3.3 定义路由中间件"></a>9.3.3 定义路由中间件</h3><p>如果 只需要对某一些路由进行功能封装 ，则就需要路由中间件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/路径&#x27;</span>,<span class="string">`中间件函数`</span>,<span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/路径&#x27;</span>,<span class="string">`中间件函数1`</span>,<span class="string">`中间件函数2`</span>,<span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="9-4-静态资源中间件"><a href="#9-4-静态资源中间件" class="headerlink" title="9.4 静态资源中间件"></a>9.4 静态资源中间件</h2><p>express 内置处理静态资源的中间件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入express框架</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//创建服务对象</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//静态资源中间件的设置，将当前文件夹下的public目录作为网站的根目录</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&#x27;./public&#x27;</span>)); <span class="comment">//当然这个目录中都是一些静态资源</span></span><br><span class="line"><span class="comment">//如果访问的内容经常变化，还是需要设置路由</span></span><br><span class="line"><span class="comment">//但是，在这里有一个问题，如果public目录下有index.html文件，单独也有index.html的路由，</span></span><br><span class="line"><span class="comment">//则谁书写在前，优先执行谁</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/index.html&#x27;</span>,<span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line">  respsonse.<span class="title function_">send</span>(<span class="string">&#x27;首页&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//监听端口</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3000 端口启动....&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意事项:</p>
<p>index.html 文件为默认打开的资源<br>如果静态资源与路由规则同时匹配，谁先匹配谁就响应<br>路由响应动态资源，静态资源中间件响应静态资源</p>
</blockquote>
<h2 id="9-5-获取请求体数据body-parser"><a href="#9-5-获取请求体数据body-parser" class="headerlink" title="9.5 获取请求体数据body-parser"></a>9.5 获取请求体数据body-parser</h2><p>获取请求体数据 body-parser</p>
<ul>
<li>安装&amp;导包</li>
</ul>
<blockquote>
<p>npm i body-parser<br>const bodyParser &#x3D; require(‘body-parser’);</p>
</blockquote>
<ul>
<li>获取中间件函数</li>
</ul>
<blockquote>
<p>&#x2F;&#x2F;处理 querystring 格式的请求体<br>let urlParser &#x3D; bodyParser.urlencoded({extended:false});<br>&#x2F;&#x2F;处理 JSON 格式的请求体<br>let jsonParser &#x3D; bodyParser.json();</p>
</blockquote>
<ul>
<li>设置路由中间件，然后使用 request.body 来获取请求体数据</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, urlParser, <span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">//获取请求体数据</span></span><br><span class="line">  <span class="comment">//console.log(request.body);</span></span><br><span class="line">  <span class="comment">//用户名</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">body</span>.<span class="property">username</span>);</span><br><span class="line">  <span class="comment">//密码</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">body</span>.<span class="property">userpass</span>);</span><br><span class="line">  response.<span class="title function_">send</span>(<span class="string">&#x27;获取请求体数据&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="9-6-图片防盗链"><a href="#9-6-图片防盗链" class="headerlink" title="9.6 图片防盗链"></a>9.6 图片防盗链</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//创建应用</span></span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//声明中间函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">recordMiddleware</span>(<span class="params">req,res,next</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> referer = req.<span class="title function_">get</span>(<span class="string">&#x27;referer&#x27;</span>);<span class="comment">// 获取指定的请求头</span></span><br><span class="line">    <span class="keyword">if</span> (referer) &#123;</span><br><span class="line">        <span class="keyword">var</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(referer);</span><br><span class="line">        <span class="keyword">var</span> hostname = url.<span class="property">hostname</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(hostname);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(hostname !== <span class="string">&#x27;localhost&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (hostname !== <span class="string">&#x27;localhost&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;f&#x27;</span>)</span><br><span class="line">            res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">send</span>(<span class="string">`&lt;h1&gt;404 Not found&lt;/h1&gt;`</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;继续执行&#x27;</span>)</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">app.<span class="title function_">use</span>(recordMiddleware);</span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(__dirname+<span class="string">&#x27;/public&#x27;</span>)); <span class="comment">//要放在后面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听端口 启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动, 端口监听为 3000...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="9-7-Router"><a href="#9-7-Router" class="headerlink" title="9.7 Router"></a>9.7 Router</h2><h3 id="9-7-1-Router-介绍"><a href="#9-7-1-Router-介绍" class="headerlink" title="9.7.1 Router 介绍"></a>9.7.1 Router 介绍</h3><p>express 中的 Router 是一个完整的中间件和路由系统，可以看做是一个小型的 app 对象。对路由进行模块化，更好的管理路由</p>
<h3 id="9-7-2-Router-使用"><a href="#9-7-2-Router-使用" class="headerlink" title="9.7.2 Router 使用"></a>9.7.2 Router 使用</h3><ul>
<li>创建独立的 JS 文件（homeRouter.js）</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 导入 express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//2. 创建路由器对象</span></span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line"><span class="comment">//3. 在 router 对象身上添加路由</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;首页&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/cart&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;购物车&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//4. 暴露</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router;</span><br></pre></td></tr></table></figure>

<ul>
<li>主文件</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//5.引入子路由文件</span></span><br><span class="line"><span class="keyword">const</span> homeRouter = <span class="built_in">require</span>(<span class="string">&#x27;./routes/homeRouter&#x27;</span>);</span><br><span class="line"><span class="comment">//6.设置和使用中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(homeRouter);</span><br><span class="line"><span class="comment">//app.use(&#x27;/&#x27;, indexRouter);//路由(默认)</span></span><br><span class="line"><span class="comment">//app.use(&#x27;/users&#x27;, usersRouter);//路由前缀</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3000 端口启动....&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="9-8-EJS模板引擎"><a href="#9-8-EJS模板引擎" class="headerlink" title="9.8 EJS模板引擎"></a>9.8 EJS模板引擎</h2><blockquote>
<p>模板引擎是分离 用户界面和业务数据 的一种技术 (分离html和js)</p>
</blockquote>
<h3 id="9-8-1-什么是-EJS"><a href="#9-8-1-什么是-EJS" class="headerlink" title="9.8.1 什么是 EJS"></a>9.8.1 什么是 EJS</h3><blockquote>
<p>EJS 是一个高效的 Javascript 的模板引擎<br>官网: <a target="_blank" rel="noopener" href="https://ejs.co/">https://ejs.co/</a><br>中文站： <a target="_blank" rel="noopener" href="https://ejs.bootcss.com/">https://ejs.bootcss.com/</a></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.安装ejs</span></span><br><span class="line"><span class="comment">//2.导入ejs</span></span><br><span class="line"><span class="keyword">var</span> ejs = <span class="built_in">require</span>(<span class="string">&#x27;ejs&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">//字符串</span></span><br><span class="line"><span class="keyword">var</span> china = <span class="string">&#x27;中国&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> weather = <span class="string">&#x27;大太阳&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> demo = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./13_模板引擎/demo.html&#x27;</span>,<span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line"><span class="comment">// //使用ejs渲染</span></span><br><span class="line"><span class="comment">// // var result = ejs.render(&#x27;我爱你 &lt;%= china %&gt;&#x27;,&#123;china:china&#125;);</span></span><br><span class="line"><span class="comment">// // var result = ejs.render(&#x27;我爱你 &lt;%= china %&gt;&#x27;,&#123;china&#125;);</span></span><br><span class="line"><span class="keyword">var</span> result = ejs.<span class="title function_">render</span>(demo,&#123;china,weather&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br></pre></td></tr></table></figure>

<h3 id="9-8-2-EJS常用语法"><a href="#9-8-2-EJS常用语法" class="headerlink" title="9.8.2 EJS常用语法"></a>9.8.2 EJS常用语法</h3><blockquote>
<p>执行JS代码<br>&lt;% code %&gt;<br>输出转义的数据到模板上<br>&lt;%&#x3D; code %&gt;<br>输出非转义的数据到模板上<br>&lt;%- code %&gt;</p>
</blockquote>
<h3 id="9-8-3-express中使用EJS"><a href="#9-8-3-express中使用EJS" class="headerlink" title="9.8.3 express中使用EJS"></a>9.8.3 express中使用EJS</h3><blockquote>
<p>npm i ejs</p>
</blockquote>
<ul>
<li>home.ejs</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我爱你 &lt;%= china %&gt;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      &lt;%=weather%&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>15_模板引擎_express中使用ejs.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">var</span> china=<span class="string">&#x27;中国&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> weather = <span class="string">&#x27;大太阳&#x27;</span>;</span><br><span class="line"><span class="comment">//1.设置模板引擎</span></span><br><span class="line">app.<span class="title function_">set</span>(<span class="string">&#x27;view engine&#x27;</span>,<span class="string">&#x27;ejs&#x27;</span>);</span><br><span class="line"><span class="comment">//2.设置模板文件存放位置</span></span><br><span class="line">app.<span class="title function_">set</span>(<span class="string">&#x27;views&#x27;</span>,path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;./13_模板引擎&#x27;</span>));</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/home2&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.<span class="title function_">setHeader</span>(<span class="string">&quot;Content-Type&quot;</span>,<span class="string">&quot;text/html;charset=utf-8&quot;</span>)</span><br><span class="line">    <span class="comment">//3.render响应,直接渲染到页面返回</span></span><br><span class="line">    res.<span class="title function_">render</span>(<span class="string">&#x27;home&#x27;</span>,&#123;china,weather&#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听端口 启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动, 端口监听为 3000...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="9-8-4-express-generator"><a href="#9-8-4-express-generator" class="headerlink" title="9.8.4 express-generator"></a>9.8.4 express-generator</h3><p><a target="_blank" rel="noopener" href="https://www.expressjs.com.cn/starter/generator.html">express-generator中文官网</a></p>
<blockquote>
<p>npm install -g express-generator 全局安装命令<br>express -h 查看帮助<br>express -e &lt;目录名&gt; 或 –view &#x3D;ejs &lt;目录名&gt; 当前目录或指定目录初始化可直接创建)<br>express i 安装依赖<br>npm start 启动</p>
</blockquote>
<h3 id="9-8-5-文件上传"><a href="#9-8-5-文件上传" class="headerlink" title="9.8.5 文件上传"></a>9.8.5 文件上传</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;./fileDeal&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    请输入姓名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    请上传文件:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myfile&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-8-6-文件处理"><a href="#9-8-6-文件处理" class="headerlink" title="9.8.6 文件处理"></a>9.8.6 文件处理</h3><ul>
<li>引入包npm i <a href="mailto:&#x66;&#111;&#x72;&#x6d;&#x69;&#100;&#97;&#98;&#108;&#x65;&#x40;&#x32;&#46;&#49;&#x2e;&#50;">&#x66;&#111;&#x72;&#x6d;&#x69;&#100;&#97;&#98;&#108;&#x65;&#x40;&#x32;&#46;&#49;&#x2e;&#50;</a> (高版本会报错)</li>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/formidable">formidable</a></li>
</ul>
<p><img src="https://bu.dusays.com/2024/08/25/66cb12c7619ee.png" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> formidable = <span class="built_in">require</span>(<span class="string">&#x27;formidable&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/fileDeal&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> form = <span class="title function_">formidable</span>(&#123;</span><br><span class="line">        <span class="comment">//设置文件保存路径</span></span><br><span class="line">        <span class="attr">uploadDir</span>: path.<span class="title function_">resolve</span>(__dirname , <span class="string">&#x27;./public&#x27;</span>),</span><br><span class="line">        <span class="comment">//保持文件后缀</span></span><br><span class="line">        <span class="attr">keepExtensions</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    form.<span class="title function_">parse</span>(req, <span class="function">(<span class="params">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="title function_">next</span>(err);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// console.log(fields)//属性集合</span></span><br><span class="line">        <span class="comment">// console.log(files)//文件集合</span></span><br><span class="line">    </span><br><span class="line">        <span class="comment">//服务器保存该图片的访问 URL</span></span><br><span class="line">        <span class="comment">// /images/8ad3d5e36012212ba7642c000.jpg</span></span><br><span class="line">        <span class="comment">// let url = &#x27;/public/&#x27; + files.myfile.newFilename;// 将来将此数据保存在数据库中</span></span><br><span class="line">        <span class="keyword">let</span> url = files.<span class="property">myfile</span>.<span class="property">newFilename</span>;<span class="comment">// 将来将此数据保存在数据库中</span></span><br><span class="line">        <span class="comment">// res.json(&#123;fields, files&#125;);</span></span><br><span class="line">        res.<span class="title function_">end</span>(url);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="10-Mongodb"><a href="#10-Mongodb" class="headerlink" title="10.Mongodb"></a>10.Mongodb</h1><h2 id="10-1-介绍"><a href="#10-1-介绍" class="headerlink" title="10.1 介绍"></a>10.1 介绍</h2><blockquote>
<p>MongoDB 是一个基于分布式文件存储的数据库(并不是单纯的内存数据库)，官方地址 <a target="_blank" rel="noopener" href="https://www.mongodb.com/">https://www.mongodb.com/</a><br>操作语法与 JavaScript 类似，容易上手，学习成本低</p>
</blockquote>
<blockquote>
<p>Mongodb 中有三个重要概念需要掌握<br>数据库（database） 数据库是一个数据仓库，数据库服务下可以创建很多数据库，数据库中可以存放很多集合<br>集合（collection） 集合类似于 JS 中的数组，在集合中可以存放很多文档<br>文档（document） 文档是数据库中的最小单位，类似于 JS 中的对象</p>
</blockquote>
<p><img src="https://bu.dusays.com/2024/08/25/66cb131a2417c.png" alt="在这里插入图片描述"></p>
<h2 id="10-2-下载与启动"><a href="#10-2-下载与启动" class="headerlink" title="10.2 下载与启动"></a>10.2 下载与启动</h2><blockquote>
<p>下载地址： <a target="_blank" rel="noopener" href="https://www.mongodb.com/try/download/community">https://www.mongodb.com/try/download/community</a><br>建议选择 zip 类型， 通用性更强配置步骤如下:</p>
<ol>
<li>将压缩包移动到 C:\Program Files 下，然后解压</li>
<li>创建 C:\data\db 目录，mongodb 会将数据默认保存在这个文件夹</li>
<li>以 mongodb 中 bin 目录作为工作目录，启动命令行</li>
<li>运行命令 mongod</li>
<li>访问<a target="_blank" rel="noopener" href="http://localhost:27017/">http://localhost:27017</a> 测试 或启动客户端工具mongo.exe工具</li>
</ol>
</blockquote>
<blockquote>
<p>自定义配置启动:</p>
<ol>
<li><p>新建data log etc 3个目录</p>
</li>
<li><p>在etc下新建mongodb.conf配置文件</p>
</li>
<li><p>db存放的目录</p>
<p>dbpath&#x3D;D:\mongodb-windows-x86_64-5.0.24\mongodb-win32-x86_64-windows-5.0.24\data</p>
<p>后台启动需要配置日志输出</p>
<p>logpath&#x3D;D:\mongodb-windows-x86_64-5.0.24\mongodb-win32-x86_64-windows-5.0.24\log\mongodb.log</p>
</li>
<li><p>运行命令启动</p>
<p>mongod –config D:\mongodb-windows-x86_64-5.0.24\mongodb-win32-x86_64-windows-5.0.24\etc\mongodb.conf</p>
</li>
</ol>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/gbc223/articles/17167483.html">linunx安装参考</a></p>
<p><img src="https://bu.dusays.com/2024/08/25/66cb13b9b2905.png" alt="在这里插入图片描述"></p>
<p><img src="https://bu.dusays.com/2024/08/25/66cb13c87302c.png" alt="在这里插入图片描述"></p>
<h2 id="10-3-命令行交互"><a href="#10-3-命令行交互" class="headerlink" title="10.3 命令行交互"></a>10.3 命令行交互</h2><ul>
<li>数据库操作</li>
</ul>
<blockquote>
<p>显示所有的数据库<br>show dbs<br>切换到指定的数据库，如果数据库不存在会自动创建数据库(刚创建不会显示,只有加入数据,才会创建)<br>use 数据库名<br>显示当前所在的数据库<br>db<br>删除当前数据库<br>use 库名<br>db.dropDatabase()</p>
</blockquote>
<ul>
<li>集合操作</li>
</ul>
<blockquote>
<p>创建集合<br>db.createCollection(‘集合名称’)<br>显示当前数据库中的所有集合<br>show collections<br>删除某个集合<br>db.集合名.drop()<br>重命名集合<br>db.集合名.renameCollection(‘newName’)</p>
</blockquote>
<ul>
<li>文档操作</li>
</ul>
<blockquote>
<p>插入文档<br>db.集合名.insert(文档对象);<br>查询文档<br>db.集合名.find(查询条件)<br>_id 是 mongodb 自动生成的唯一编号，用来唯一标识文档<br>更新文档<br>db.集合名.update(查询条件,新的文档) 默认全部子弹更新<br>db.集合名.update({name:’张三’},{$set:{age:19}}) 指定字段更新<br>删除文档<br>db.集合名.remove(查询条件)</p>
</blockquote>
<blockquote>
<p>update 方法默认只会更新符合查询条件的第一条文档。这是因为在进行更新操作时，MongoDB默认只会更新匹配的第一条文档，除非你显式指定 multi: true 选项，这样才会更新所有匹配的文档。例如，你可以这样使用 update 方法来更新所有匹配的文档：<br>db.集合名.update(查询条件, 更新操作, { multi: true })</p>
</blockquote>
<p><img src="https://bu.dusays.com/2024/08/25/66cb1421752bd.png" alt="在这里插入图片描述"></p>
<p><img src="https://bu.dusays.com/2024/08/25/66cb1421752bd.png"></p>
<h2 id="10-4-mongoose"><a href="#10-4-mongoose" class="headerlink" title="10.4 mongoose"></a>10.4 mongoose</h2><blockquote>
<p>Mongoose 是一个对象文档模型库，官网 <a target="_blank" rel="noopener" href="http://www.mongoosejs.net/">http://www.mongoosejs.net/</a><br>方便使用代码操作 mongodb 数据库<br>npm i <a href="mailto:&#109;&#x6f;&#110;&#x67;&#x6f;&#x6f;&#x73;&#101;&#64;&#53;&#46;&#x31;&#x33;&#46;&#x31;&#x35;">&#109;&#x6f;&#110;&#x67;&#x6f;&#x6f;&#x73;&#101;&#64;&#53;&#46;&#x31;&#x33;&#46;&#x31;&#x35;</a></p>
</blockquote>
<h3 id="10-4-1-初步使用"><a href="#10-4-1-初步使用" class="headerlink" title="10.4.1 初步使用"></a>10.4.1 初步使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 安装 mongoose</span></span><br><span class="line"><span class="comment">//2. 导入 mongoose</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"><span class="comment">//设置 strictQuery 为 true</span></span><br><span class="line">mongoose.<span class="title function_">set</span>(<span class="string">&#x27;strictQuery&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">//3. 连接 mongodb 服务                        数据库的名称,没有会自动创建</span></span><br><span class="line">mongoose.<span class="title function_">connect</span>(<span class="string">&#x27;mongodb://127.0.0.1:27017/bilibili&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 设置回调</span></span><br><span class="line"><span class="comment">// 设置连接成功的回调  once 一次   事件回调函数只执行一次</span></span><br><span class="line">mongoose.<span class="property">connection</span>.<span class="title function_">once</span>(<span class="string">&#x27;open&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;连接成功&#x27;</span>);</span><br><span class="line">        <span class="comment">//5. 创建文档的结构对象</span></span><br><span class="line">        <span class="comment">//设置集合中文档的属性以及属性值的类型</span></span><br><span class="line">        <span class="keyword">let</span> <span class="title class_">BookSchema</span> = <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="title class_">String</span>,</span><br><span class="line">            <span class="attr">author</span>: <span class="title class_">String</span>,</span><br><span class="line">            <span class="attr">price</span>: <span class="title class_">Number</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//6. 创建模型对象  对文档操作的封装对象</span></span><br><span class="line">        <span class="keyword">let</span> <span class="title class_">BookModel</span> = mongoose.<span class="title function_">model</span>(<span class="string">&#x27;book&#x27;</span>, <span class="title class_">BookSchema</span>);</span><br><span class="line">        <span class="comment">//7. 新增文档</span></span><br><span class="line">        <span class="comment">//7. 新增</span></span><br><span class="line">        <span class="title class_">BookModel</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;西游记&#x27;</span>,</span><br><span class="line">            <span class="attr">author</span>: <span class="string">&#x27;吴承恩&#x27;</span>,</span><br><span class="line">            <span class="attr">price</span>: <span class="number">19.9</span></span><br><span class="line">        &#125;, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">//判断是否有错误</span></span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//如果没有出错, 则输出插入后的文档对象</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">            <span class="comment">//8. 关闭数据库连接 (项目运行过程中, 不会添加该代码)</span></span><br><span class="line">            mongoose.<span class="title function_">disconnect</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置连接错误的回调</span></span><br><span class="line">mongoose.<span class="property">connection</span>.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;连接失败&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置连接关闭的回调</span></span><br><span class="line">mongoose.<span class="property">connection</span>.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;连接关闭&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭 mongodb 的连接</span></span><br><span class="line"><span class="comment">// setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   mongoose.disconnect();</span></span><br><span class="line"><span class="comment">// &#125;, 2000)</span></span><br></pre></td></tr></table></figure>

<h3 id="10-4-2-字段类型"><a href="#10-4-2-字段类型" class="headerlink" title="10.4.2 字段类型"></a>10.4.2 字段类型</h3><p><img src="https://bu.dusays.com/2024/08/25/66cb145ad6cda.png" alt="在这里插入图片描述"></p>
<h3 id="10-4-3-字段值验证"><a href="#10-4-3-字段值验证" class="headerlink" title="10.4.3 字段值验证"></a>10.4.3 字段值验证</h3><blockquote>
<p>Mongoose 有一些内建验证器，可以对字段值进行验证</p>
</blockquote>
<ul>
<li>必填项</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span> <span class="comment">// 设置必填项</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>默认值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">author</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="string">&#x27;匿名&#x27;</span> <span class="comment">//默认值</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>枚举值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gender</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">enum</span>: [<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>] <span class="comment">//设置的值必须是数组中的</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>唯一值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">username</span>: &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">  <span class="attr">unique</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">## unique 需要 重建集合 才能有效果</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">let</span> <span class="title class_">BookSchema</span> = <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">        <span class="attr">required</span>: <span class="literal">true</span>, <span class="comment">// 表明该属性必须不为空</span></span><br><span class="line">        <span class="attr">unique</span>: <span class="literal">true</span><span class="comment">// 设置为独一无二的</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">author</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="string">&#x27;匿名&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//类型</span></span><br><span class="line">    <span class="attr">style</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">        <span class="comment">//枚举</span></span><br><span class="line">        <span class="attr">enum</span>: [<span class="string">&#x27;言情&#x27;</span>,<span class="string">&#x27;城市&#x27;</span>,<span class="string">&#x27;志怪&#x27;</span>,<span class="string">&#x27;恐怖&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">price</span>: <span class="title class_">Number</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="10-4-4-CURD"><a href="#10-4-4-CURD" class="headerlink" title="10.4.4 CURD"></a>10.4.4 CURD</h3><blockquote>
<p>数据库的基本操作包括四个，增加（create），删除（delete），修改（update），查（read）</p>
</blockquote>
<ul>
<li>增加</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 插入一条</span></span><br><span class="line">  <span class="title class_">SongModel</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>:<span class="string">&#x27;给我一首歌的时间&#x27;</span>,</span><br><span class="line">      <span class="attr">author</span>: <span class="string">&#x27;Jay&#x27;</span></span><br><span class="line">  &#125;, <span class="keyword">function</span>(<span class="params">err, data</span>)&#123;</span><br><span class="line">      <span class="comment">//错误</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">      <span class="comment">//插入后的数据对象</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 批量插入</span></span><br><span class="line"><span class="title class_">PhoneModel</span>.<span class="title function_">insertMany</span>([</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">brand</span>:<span class="string">&#x27;华为&#x27;</span>,</span><br><span class="line">        <span class="attr">color</span>:<span class="string">&#x27;灰色&#x27;</span>,</span><br><span class="line">        <span class="attr">price</span>:<span class="number">2399</span>,</span><br><span class="line">        <span class="attr">tags</span>:[<span class="string">&#x27;电量大&#x27;</span>,<span class="string">&#x27;屏幕大&#x27;</span>,<span class="string">&#x27;信号好&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">brand</span>:<span class="string">&#x27;小米&#x27;</span>,</span><br><span class="line">        <span class="attr">color</span>:<span class="string">&#x27;白色&#x27;</span>,</span><br><span class="line">        <span class="attr">price</span>:<span class="number">2099</span>,</span><br><span class="line">        <span class="attr">tags</span>:[<span class="string">&#x27;电量大&#x27;</span>,<span class="string">&#x27;屏幕大&#x27;</span>,<span class="string">&#x27;信号好&#x27;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">],<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;写入成功&#x27;</span>);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>删除</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除一条数据</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">deleteOne</span>(&#123;<span class="attr">_id</span>:<span class="string">&#x27;5dd65f32be6401035cb5b1ed&#x27;</span>&#125;, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除成功&#x27;</span>);</span><br><span class="line">  mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 批量删除</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">deleteMany</span>(&#123;<span class="attr">author</span>:<span class="string">&#x27;Jay&#x27;</span>&#125;, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除成功&#x27;</span>);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>更新</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 更新一条数据</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">updateOne</span>(&#123;<span class="attr">author</span>: <span class="string">&#x27;JJ Lin&#x27;</span>&#125;, &#123;<span class="attr">author</span>: <span class="string">&#x27;林俊杰&#x27;</span>&#125;, <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 批量更新数据</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">updateMany</span>(&#123;<span class="attr">author</span>: <span class="string">&#x27;Leehom Wang&#x27;</span>&#125;, &#123;<span class="attr">author</span>: <span class="string">&#x27;王力宏&#x27;</span>&#125;, <span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>查询</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查询一条数据</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">findOne</span>(&#123;<span class="attr">author</span>: <span class="string">&#x27;王力宏&#x27;</span>&#125;, <span class="keyword">function</span>(<span class="params">err, data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//根据 id 查询数据</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">findById</span>(<span class="string">&#x27;5dd662b5381fc316b44ce167&#x27;</span>,<span class="keyword">function</span>(<span class="params">err, data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 批量查询数据</span></span><br><span class="line"><span class="comment">// 不加条件查询</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">find</span>(<span class="keyword">function</span>(<span class="params">err, data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//加条件查询</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">find</span>(&#123;<span class="attr">author</span>: <span class="string">&#x27;王力宏&#x27;</span>&#125;, <span class="keyword">function</span>(<span class="params">err, data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="10-4-5-条件控制"><a href="#10-4-5-条件控制" class="headerlink" title="10.4.5 条件控制"></a>10.4.5 条件控制</h3><ul>
<li>运算符</li>
</ul>
<blockquote>
<p>在 mongodb 不能 &gt; &lt; &gt;&#x3D; &lt;&#x3D; !&#x3D;&#x3D; 等运算符，需要使用替代符号</p>
<p>使用 $gt<br>&lt; 使用 $lt<br>&#x3D; 使用 $gte<br>&lt;&#x3D; 使用 $lte<br>!&#x3D;&#x3D; 使用 $ne<br>db.students.find({id:{$gt:3}}); id号比3大的所有的记录</p>
</blockquote>
<ul>
<li>逻辑运算</li>
</ul>
<blockquote>
<p>$or 逻辑或的情况<br>db.students.find({KaTeX parse error: Expected ‘EOF’, got ‘}’ at position 23: …e:18},{age:24}]}̲); <code>and 逻辑与的情况db.students.find(&#123;$and: [&#123;age: &#123;$lt:20&#125;&#125;, &#123;age: &#123;$gt: 15&#125;&#125;]&#125;);正则匹配条件中可以直接使用 JS 的正则语法，通过正则可以进行模糊查询db.students.find(&#123;name:/imissyou/&#125;);</code></p>
</blockquote>
<h3 id="10-4-6-个性化读取"><a href="#10-4-6-个性化读取" class="headerlink" title="10.4.6 个性化读取"></a>10.4.6 个性化读取</h3><ul>
<li>字段筛选</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//0:不要的字段</span></span><br><span class="line"><span class="comment">//1:要的字段</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">find</span>().<span class="title function_">select</span>(&#123;<span class="attr">_id</span>:<span class="number">0</span>,<span class="attr">title</span>:<span class="number">1</span>&#125;).<span class="title function_">exec</span>(<span class="keyword">function</span>(<span class="params">err,data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>数据排序</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//sort 排序</span></span><br><span class="line"><span class="comment">//1:升序</span></span><br><span class="line"><span class="comment">//-1:倒序</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">find</span>().<span class="title function_">sort</span>(&#123;<span class="attr">hot</span>:<span class="number">1</span>&#125;).<span class="title function_">exec</span>(<span class="keyword">function</span>(<span class="params">err,data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>数据截取</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//skip 跳过 limit 限定</span></span><br><span class="line"><span class="title class_">SongModel</span>.<span class="title function_">find</span>().<span class="title function_">skip</span>(<span class="number">10</span>).<span class="title function_">limit</span>(<span class="number">10</span>).<span class="title function_">exec</span>(<span class="keyword">function</span>(<span class="params">err,data</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    mongoose.<span class="property">connection</span>.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="10-4-7-图形化管理工具"><a href="#10-4-7-图形化管理工具" class="headerlink" title="10.4.7 图形化管理工具"></a>10.4.7 图形化管理工具</h3><p>我们可以使用图形化的管理工具来对 Mongodb 进行交互，这里演示两个图形化工具</p>
<blockquote>
<p>Robo 3T 免费 <a target="_blank" rel="noopener" href="https://github.com/Studio3T/robomongo/releases">https://github.com/Studio3T/robomongo/releases</a><br>Navicat 收费 <a target="_blank" rel="noopener" href="https://www.navicat.com.cn/">https://www.navicat.com.cn/</a></p>
</blockquote>
<h1 id="11-接口"><a href="#11-接口" class="headerlink" title="11.接口"></a>11.接口</h1><h2 id="11-1-RESTful-API"><a href="#11-1-RESTful-API" class="headerlink" title="11.1 RESTful API"></a>11.1 RESTful API</h2><p>RESTful API 是一种特殊风格的接口，主要特点有如下几个：</p>
<ul>
<li>URL 中的路径表示 资源 ，路径中不能有 动词 ，例如 create , delete , update 等这些都不能有</li>
<li>操作资源要与 HTTP 请求方法 对应</li>
<li>操作结果要与 HTTP 响应状态码 对应</li>
</ul>
<p><img src="https://bu.dusays.com/2024/08/25/66cb170f7311a.png" alt="在这里插入图片描述"></p>
<p>扩展阅读： <a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2014/05/restful_api.html">https://www.ruanyifeng.com/blog/2014/05/restful_api.html</a></p>
<h2 id="11-2-json-server"><a href="#11-2-json-server" class="headerlink" title="11.2 json-server"></a>11.2 json-server</h2><p>json-server 本身是一个 JS 编写的工具包，可以快速搭建 RESTful API 服务</p>
<p>官方地址: <a target="_blank" rel="noopener" href="https://github.com/typicode/json-server">https://github.com/typicode/json-server</a></p>
<blockquote>
<p>操作步骤：</p>
<p>全局安装 json-server<br>npm i -g json-server<br>创建 JSON 文件（db.json），编写基本结构<br>以 JSON 文件所在文件夹作为工作目录 ，执行如下命令<br>json-server –watch db.json</p>
</blockquote>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;song&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;干杯&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;singer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;五月天&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;当&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;singer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;动力火车&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;不能说的秘密&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;singer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;周杰伦&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="12-会话控制"><a href="#12-会话控制" class="headerlink" title="12.会话控制"></a>12.会话控制</h1><blockquote>
<p>所谓会话控制就是 对会话进行控制<br>HTTP 是一种无状态的协议，它没有办法区分多次的请求是否来自于同一个客户端， 无法区分用户<br>而产品中又大量存在的这样的需求，所以我们需要通过 会话控制 来解决该问题.<br>常见的会话控制技术有三种：</p>
<ul>
<li>cookie</li>
<li>session</li>
<li>token</li>
</ul>
</blockquote>
<h2 id="12-1-cookie"><a href="#12-1-cookie" class="headerlink" title="12.1 cookie"></a>12.1 cookie</h2><ul>
<li>cookie 是什么</li>
</ul>
<blockquote>
<p>cookie 是 HTTP 服务器发送到用户浏览器并保存在本地(浏览器)的一小块数据<br>cookie 是保存在浏览器端的一小块数据<br>cookie 是按照域名划分保存的<br>浏览器向服务器发送请求时，会自动将 当前域名下 可用的 cookie 设置在请求头中，然后传递给服务器<br>这个请求头的名字也叫 cookie ，所以将cookie 理解为一个 HTTP 的请求头也是可以的<br>不同浏览器中的 cookie 是相互独立的，不共享</p>
</blockquote>
<p><img src="https://bu.dusays.com/2024/08/25/66cb177502359.png" alt="在这里插入图片描述"></p>
<p><img src="https://bu.dusays.com/2024/08/25/66cb17885b275.png" alt="在这里插入图片描述"></p>
<ul>
<li>express中使用cookie</li>
<li>设置</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置 cookie</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/settt-cookie&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;settt-cookie&#x27;</span>);</span><br><span class="line">    <span class="comment">// 不带时效性,会在浏览器关闭的时候,销毁</span></span><br><span class="line">    res.<span class="title function_">cookie</span>(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;wangwu&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 带时效性</span></span><br><span class="line">    res.<span class="title function_">cookie</span>(<span class="string">&#x27;email&#x27;</span>, <span class="string">&#x27;23123456@qq.com&#x27;</span>, &#123;<span class="attr">maxAge</span>: <span class="number">30</span> * <span class="number">1000</span>&#125;);</span><br><span class="line">    res.<span class="title function_">end</span>(<span class="string">&#x27;hello express server&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>删除</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除cookie</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/removee-cookie&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">clearCookie</span>(<span class="string">&#x27;email&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Cookie的删除&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>获取</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">npm -i cookie-parser</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cookieParser = <span class="built_in">require</span>(<span class="string">&#x27;cookie-parser&#x27;</span>);</span><br><span class="line"><span class="comment">//3. 设置 cookieParser 中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cookieParser</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//读取 cookie</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/gettt-cookie&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">cookies</span>);</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;Cookie的读取&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="12-2-session"><a href="#12-2-session" class="headerlink" title="12.2 session"></a>12.2 session</h2><blockquote>
<p>session 是保存在 服务器端的一块儿数据 ，保存当前访问用户的相关信息<br>实现会话控制，可以识别用户的身份，快速获取当前用户的相关信息</p>
</blockquote>
<p><img src="https://bu.dusays.com/2024/08/25/66cb17fc73523.png" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//2. 引入 express-session connect-mongo(如果存入mongodb中的话)</span></span><br><span class="line"><span class="keyword">const</span> session = <span class="built_in">require</span>(<span class="string">&quot;express-session&quot;</span>);</span><br><span class="line"><span class="comment">//2. 引入 cookieParser 包</span></span><br><span class="line"><span class="keyword">const</span> cookieParser = <span class="built_in">require</span>(<span class="string">&#x27;cookie-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MongoStore</span> = <span class="built_in">require</span>(<span class="string">&#x27;connect-mongo&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cookieParser</span>());</span><br><span class="line"><span class="comment">//3. 设置 session 的中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">session</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;sid&#x27;</span>, <span class="comment">//设置cookie的name，默认值是：connect.sid</span></span><br><span class="line">    <span class="attr">secret</span>: <span class="string">&#x27;atguigu&#x27;</span>, <span class="comment">//参与加密的字符串（又称签名）</span></span><br><span class="line">    <span class="attr">saveUninitialized</span>: <span class="literal">false</span>, <span class="comment">//是否为每次请求都设置一个cookie用来存储session的id</span></span><br><span class="line">    <span class="attr">resave</span>: <span class="literal">true</span>, <span class="comment">//是否在每次请求时重新保存session,重新延长session存活周期</span></span><br><span class="line">    <span class="attr">store</span>: <span class="title class_">MongoStore</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">        <span class="attr">mongoUrl</span>: <span class="string">&#x27;mongodb://114.115.185.179:27017/bilibili&#x27;</span> <span class="comment">//数据库的连接配置</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">cookie</span>: &#123;</span><br><span class="line">        <span class="attr">httpOnly</span>: <span class="literal">true</span>, <span class="comment">// 开启后前端无法通过 JS 操作</span></span><br><span class="line">        <span class="attr">maxAge</span>: <span class="number">1000</span> * <span class="number">30</span> <span class="comment">// 这一条 是控制 sessionID 的过期时间的！！！ (浏览器和服务器session都过期)</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建 session</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/login&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//设置session</span></span><br><span class="line">    req.<span class="property">session</span>.<span class="property">username</span> = <span class="string">&#x27;zhangsan&#x27;</span>;</span><br><span class="line">    req.<span class="property">session</span>.<span class="property">email</span> = <span class="string">&#x27;zhangsan@qq.com&#x27;</span></span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;登录成功&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//获取 session</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/home&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;session的信息&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">session</span>.<span class="property">username</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">cookies</span>);</span><br><span class="line">    <span class="keyword">if</span> (req.<span class="property">session</span>.<span class="property">username</span>) &#123;</span><br><span class="line">        res.<span class="title function_">send</span>(<span class="string">`你好 <span class="subst">$&#123;req.session.username&#125;</span>`</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        res.<span class="title function_">send</span>(<span class="string">&#x27;登录 注册&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//销毁 session</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/logout&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//销毁session</span></span><br><span class="line"><span class="comment">// res.send(&#x27;设置session&#x27;);</span></span><br><span class="line">    req.<span class="property">session</span>.<span class="title function_">destroy</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        res.<span class="title function_">send</span>(<span class="string">&#x27;成功退出&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 监听端口 启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动, 端口监听为 3000...&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="12-3-session和cookie的区别"><a href="#12-3-session和cookie的区别" class="headerlink" title="12.3 session和cookie的区别"></a>12.3 session和cookie的区别</h2><p>cookie 和 session 的区别主要有如下几点</p>
<ol>
<li>存在的位置<ul>
<li>cookie：浏览器端</li>
<li>session：服务端</li>
</ul>
</li>
<li>安全性<ul>
<li>cookie 是以明文的方式存放在客户端的，安全性相对较低</li>
<li>session 存放于服务器中，所以安全性 相对 较好</li>
</ul>
</li>
<li>网络传输量<ul>
<li>cookie 设置内容过多会增大报文体积， 会影响传输效率</li>
<li>session 数据存储在服务器，只是通过 cookie 传递 id，所以不影响传输效率</li>
</ul>
</li>
<li>存储限制<ul>
<li>浏览器限制单个 cookie 保存的数据不能超过 4K ，且单个域名下的存储数量也有限制</li>
<li>session 数据存储在服务器中，所以没有这些限制</li>
</ul>
</li>
</ol>
<h2 id="12-4-token"><a href="#12-4-token" class="headerlink" title="12.4 token"></a>12.4 token</h2><p>token 是服务端生成并返回给 HTTP 客户端的一串加密字符串， token 中保存着 用户信息<br>实现会话控制，可以识别用户的身份，主要用于移动端 APP</p>
<p><img src="https://bu.dusays.com/2024/08/25/66cb184a9f912.png" alt="在这里插入图片描述"></p>
<p><img src="https://bu.dusays.com/2024/08/25/66cb1855efbe0.png" alt="在这里插入图片描述"></p>
<ul>
<li>token 的特点</li>
</ul>
<blockquote>
<ol>
<li>服务端压力更小<ul>
<li>数据存储在客户端</li>
</ul>
</li>
<li>相对更安全<ul>
<li>数据加密</li>
<li>可以避免 CSRF（跨站请求伪造）</li>
</ul>
</li>
<li>扩展性更强<ul>
<li>服务间可以共享</li>
<li>增加服务节点更简单</li>
</ul>
</li>
</ol>
</blockquote>
<h3 id="12-4-1-JWT"><a href="#12-4-1-JWT" class="headerlink" title="12.4.1 JWT"></a>12.4.1 JWT</h3><p>JWT（JSON Web Token ）是目前最流行的跨域认证解决方案，可用于基于 token 的身份验证 , JWT 使token的生成与校验更规范<br>我们可以使用 jsonwebtoken 包 来操作 token<br>扩展阅读： <a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html">https://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html</a></p>
<p><img src="https://bu.dusays.com/2024/08/25/66cb188d7eca5.png" alt="在这里插入图片描述"></p>
<p><img src="https://bu.dusays.com/2024/08/25/66cb18ad5be1a.png" alt="在这里插入图片描述"></p>
<p><img src="https://bu.dusays.com/2024/08/25/66cb18b4ef079.png" alt="在这里插入图片描述"></p>
<h1 id="13-模块工具使用"><a href="#13-模块工具使用" class="headerlink" title="13.模块工具使用"></a>13.模块工具使用</h1><blockquote>
<p>压缩文件archiver： <a target="_blank" rel="noopener" href="https://blog.csdn.net/X1432564581/article/details/106398056">https://blog.csdn.net/X1432564581/article/details/106398056</a></p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://hutbzc.github.io">Southblock</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://hutbzc.github.io/2024/08/26/relay/%E5%B0%9A%E7%A1%85%E8%B0%B7NodeJs%E7%AC%94%E8%AE%B0/">https://hutbzc.github.io/2024/08/26/relay/%E5%B0%9A%E7%A1%85%E8%B0%B7NodeJs%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://hutbzc.github.io" target="_blank">Southblock'Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a><a class="post-meta__tags" href="/tags/NodeJs/">NodeJs</a></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2024/05/14/664353a6a5232.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/05/29/CSS3%E7%9A%84flex%E5%B8%83%E5%B1%80/" title="CSS3的flex布局"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">CSS3的flex布局</div></div></a></div><div class="next-post pull-right"><a href="/2024/08/22/relay/%E7%A6%B9%E7%A5%9E%EF%BC%9A%E4%B8%80%E5%B0%8F%E6%97%B6%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%E8%B7%A8%E5%9F%9F&amp;%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E7%AC%94%E8%AE%B0/" title="禹神：一小时彻底搞懂跨域&amp;解决方案笔记"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">禹神：一小时彻底搞懂跨域&amp;解决方案笔记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2025/06/01/CSS%E4%B8%AD%E7%9A%84Sticky%E5%AE%9A%E4%BD%8D/" title="CSS中的Sticky定位"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-01</div><div class="title">CSS中的Sticky定位</div></div></a></div><div><a href="/2025/05/30/CSS%E9%A1%B5%E9%9D%A2%E5%B8%B8%E8%A7%81%E5%B8%83%E5%B1%80/" title="CSS页面常见布局"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-30</div><div class="title">CSS页面常见布局</div></div></a></div><div><a href="/2024/08/22/relay/%E7%A6%B9%E7%A5%9E%EF%BC%9A%E4%B8%80%E5%B0%8F%E6%97%B6%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82%E8%B7%A8%E5%9F%9F&%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E7%AC%94%E8%AE%B0/" title="禹神：一小时彻底搞懂跨域&amp;解决方案笔记"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-22</div><div class="title">禹神：一小时彻底搞懂跨域&amp;解决方案笔记</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://bu.dusays.com/2024/05/14/664353a6a5232.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Southblock</div><div class="author-info__description">个人博客Blog</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">37</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/hutbzc"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/hutbzc" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:southblock@126.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="/javascript;" target="_blank" title="QQ"><i class="fab fa-qq" style="color: #000000;"></i></a><a class="social-icon" href="/javascript;" target="_blank" title="Weixin"><i class="fab fa-weixin" style="color: #26da6f;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到Southblock' Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">1.基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.</span> <span class="toc-text">1.1. 基础命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.2.</span> <span class="toc-text">1.2. 注意事项</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Buffer%EF%BC%88%E7%BC%93%E5%86%B2%E5%99%A8%EF%BC%89%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%88%9B%E5%BB%BA"><span class="toc-number">2.</span> <span class="toc-text">2.Buffer（缓冲器）介绍与创建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E7%89%B9%E7%82%B9"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E4%BD%BF%E7%94%A8"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-fs%E6%A8%A1%E5%9D%97-file-system"><span class="toc-number">3.</span> <span class="toc-text">3. fs模块(file system)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 文件写入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 文件读取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E6%96%87%E4%BB%B6%E7%A7%BB%E5%8A%A8%E4%B8%8E%E9%87%8D%E5%91%BD%E5%90%8D"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 文件移动与重命名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 文件删除</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E6%96%87%E4%BB%B6%E5%A4%B9%E6%93%8D%E4%BD%9C"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 文件夹操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-%E6%9F%A5%E7%9C%8B%E8%B5%84%E6%BA%90%E7%8A%B6%E6%80%81"><span class="toc-number">3.6.</span> <span class="toc-text">3.6 查看资源状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-number">3.7.</span> <span class="toc-text">3.7 相对路径问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-8-dirname"><span class="toc-number">3.8.</span> <span class="toc-text">3.8 __dirname</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-9-%E7%BB%83%E4%B9%A0%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6%E8%84%9A%E6%9C%AC"><span class="toc-number">3.9.</span> <span class="toc-text">3.9 练习复制文件脚本</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-path-%E6%A8%A1%E5%9D%97"><span class="toc-number">4.</span> <span class="toc-text">4.path 模块</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-http%E6%A8%A1%E5%9D%97"><span class="toc-number">5.</span> <span class="toc-text">5.http模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E4%BD%BF%E7%94%A8-nodejs-%E5%88%9B%E5%BB%BA-HTTP-%E6%9C%8D%E5%8A%A1"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 使用 nodejs 创建 HTTP 服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-HTTP-%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 HTTP 请求报文</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-HTTP-%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 HTTP 响应报文</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1"><span class="toc-number">5.4.</span> <span class="toc-text">5.4 静态资源服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-%E8%AE%BE%E7%BD%AE%E8%B5%84%E6%BA%90%E7%B1%BB%E5%9E%8B%EF%BC%88mime%E7%B1%BB%E5%9E%8B%EF%BC%89"><span class="toc-number">5.5.</span> <span class="toc-text">5.5 设置资源类型（mime类型）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-GET-%E5%92%8C-POST-%E8%AF%B7%E6%B1%82%E5%9C%BA%E6%99%AF%E5%B0%8F%E7%BB%93"><span class="toc-number">5.6.</span> <span class="toc-text">5.6 GET 和 POST 请求场景小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-Node-js-%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">6.</span> <span class="toc-text">6.Node.js 模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E4%BB%8B%E7%BB%8D"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 初体验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E6%9A%B4%E6%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 暴漏数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97"><span class="toc-number">6.4.</span> <span class="toc-text">6.4 导入模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-%E5%AF%BC%E5%85%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-number">6.5.</span> <span class="toc-text">6.5 导入自定义模块的基本流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-CommonJS-%E8%A7%84%E8%8C%83"><span class="toc-number">6.6.</span> <span class="toc-text">6.6 CommonJS 规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-7-ES6%E6%A8%A1%E5%9D%97%E5%92%8CCommonJS%E6%A8%A1%E5%9D%97%E6%AF%94%E5%AF%B9"><span class="toc-number">6.7.</span> <span class="toc-text">6.7 ES6模块和CommonJS模块比对</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-8-ES6%E6%9A%B4%E6%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">6.8.</span> <span class="toc-text">6.8 ES6暴漏数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-9-%E6%9A%B4%E6%BC%8F%E6%95%B0%E6%8D%AE%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">6.9.</span> <span class="toc-text">6.9 暴漏数据注意事项</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-number">7.</span> <span class="toc-text">7 包管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E4%BB%8B%E7%BB%8D"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-npm"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 npm</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-1-npm%E7%9A%84%E5%AE%89%E8%A3%85-npm-v"><span class="toc-number">7.2.1.</span> <span class="toc-text">7.2.1 npm的安装 npm -v</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-2-%E5%88%9D%E5%A7%8B%E5%8C%96-npm-init-%E4%B8%8B%E8%BD%BD%E5%8C%85%E5%89%8D%E8%A6%81%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">7.2.2.</span> <span class="toc-text">7.2.2 初始化: npm init (下载包前要初始化)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-3-%E6%90%9C%E7%B4%A2%E5%8C%85"><span class="toc-number">7.2.3.</span> <span class="toc-text">7.2.3 搜索包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-4-%E4%B8%8B%E8%BD%BD-%E5%88%A0%E9%99%A4%E5%AE%89%E8%A3%85%E5%8C%85"><span class="toc-number">7.2.4.</span> <span class="toc-text">7.2.4 下载&amp;删除安装包</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-4-1-%E5%AE%89%E8%A3%85%E5%8C%85%E6%8A%A5%E9%94%99%E5%A4%84%E7%90%86"><span class="toc-number">7.2.4.1.</span> <span class="toc-text">7.2.4.1 安装包报错处理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-5-require-%E5%AF%BC%E5%85%A5-npm-%E5%8C%85%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-number">7.2.5.</span> <span class="toc-text">7.2.5 require 导入 npm 包基本流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-6-%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">7.2.6.</span> <span class="toc-text">7.2.6 生产环境与开发环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-7-%E7%94%9F%E4%BA%A7%E4%BE%9D%E8%B5%96%E4%B8%8E%E5%BC%80%E5%8F%91%E4%BE%9D%E8%B5%96"><span class="toc-number">7.2.7.</span> <span class="toc-text">7.2.7 生产依赖与开发依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-8-%E5%85%A8%E5%B1%80%E5%AE%89%E8%A3%85"><span class="toc-number">7.2.8.</span> <span class="toc-text">7.2.8 全局安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-9-%E5%AE%89%E8%A3%85%E5%8C%85%E4%BE%9D%E8%B5%96"><span class="toc-number">7.2.9.</span> <span class="toc-text">7.2.9 安装包依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-10-%E5%AE%89%E8%A3%85%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC%E7%9A%84%E5%8C%85"><span class="toc-number">7.2.10.</span> <span class="toc-text">7.2.10 安装指定版本的包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-11-%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4%E5%88%AB%E5%90%8D"><span class="toc-number">7.2.11.</span> <span class="toc-text">7.2.11 配置命令别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-12-%E5%AE%89%E8%A3%85cnpm"><span class="toc-number">7.2.12.</span> <span class="toc-text">7.2.12 安装cnpm</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-yarn"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 yarn</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-1-yarn%E4%BB%8B%E7%BB%8D"><span class="toc-number">7.3.1.</span> <span class="toc-text">7.3.1 yarn介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-2-yarn%E5%AE%89%E8%A3%85"><span class="toc-number">7.3.2.</span> <span class="toc-text">7.3.2 yarn安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-3-yarn%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">7.3.3.</span> <span class="toc-text">7.3.3 yarn常用命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-4-yarn-%E9%85%8D%E7%BD%AE%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F"><span class="toc-number">7.3.4.</span> <span class="toc-text">7.3.4 yarn 配置淘宝镜像</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-npm-%E5%92%8C-yarn-%E9%80%89%E6%8B%A9"><span class="toc-number">7.4.</span> <span class="toc-text">7.4 npm 和 yarn 选择</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-6-%E5%8F%91%E5%B8%83%E5%8C%85"><span class="toc-number">7.5.</span> <span class="toc-text">7.6 发布包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-7-%E6%9B%B4%E6%96%B0%E5%8C%85"><span class="toc-number">7.6.</span> <span class="toc-text">7.7 更新包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-8-%E5%88%A0%E9%99%A4%E5%8C%85"><span class="toc-number">7.7.</span> <span class="toc-text">7.8 删除包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-9-%E6%89%A9%E5%B1%95%E5%86%85%E5%AE%B9"><span class="toc-number">7.8.</span> <span class="toc-text">7.9 扩展内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-nvm"><span class="toc-number">8.</span> <span class="toc-text">8.nvm</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E4%BB%8B%E7%BB%8D-%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 介绍&amp;安装使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">8.2.</span> <span class="toc-text">8.2 常用命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-express"><span class="toc-number">9.</span> <span class="toc-text">9.express</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-express-%E4%BB%8B%E7%BB%8D"><span class="toc-number">9.1.</span> <span class="toc-text">9.1 express 介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-express-%E4%BD%BF%E7%94%A8"><span class="toc-number">9.2.</span> <span class="toc-text">9.2 express 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-1-%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="toc-number">9.2.1.</span> <span class="toc-text">9.2.1 初体验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-2-express-%E8%B7%AF%E7%94%B1"><span class="toc-number">9.2.2.</span> <span class="toc-text">9.2.2 express 路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-3-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">9.2.3.</span> <span class="toc-text">9.2.3 获取请求参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-4-%E8%8E%B7%E5%8F%96%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0"><span class="toc-number">9.2.4.</span> <span class="toc-text">9.2.4 获取路由参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-5-%E7%9B%B8%E5%BA%94%E8%AE%BE%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="toc-number">9.2.5.</span> <span class="toc-text">9.2.5 相应设置参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3-express-%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">9.3.</span> <span class="toc-text">9.3 express 中间件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-1-%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">9.3.1.</span> <span class="toc-text">9.3.1 定义全局中间件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-2-%E5%A4%9A%E4%B8%AA%E5%85%A8%E5%B1%80%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">9.3.2.</span> <span class="toc-text">9.3.2 多个全局中间件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-3-%E5%AE%9A%E4%B9%89%E8%B7%AF%E7%94%B1%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">9.3.3.</span> <span class="toc-text">9.3.3 定义路由中间件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-4-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">9.4.</span> <span class="toc-text">9.4 静态资源中间件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-5-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E4%BD%93%E6%95%B0%E6%8D%AEbody-parser"><span class="toc-number">9.5.</span> <span class="toc-text">9.5 获取请求体数据body-parser</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-6-%E5%9B%BE%E7%89%87%E9%98%B2%E7%9B%97%E9%93%BE"><span class="toc-number">9.6.</span> <span class="toc-text">9.6 图片防盗链</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-7-Router"><span class="toc-number">9.7.</span> <span class="toc-text">9.7 Router</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-7-1-Router-%E4%BB%8B%E7%BB%8D"><span class="toc-number">9.7.1.</span> <span class="toc-text">9.7.1 Router 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-7-2-Router-%E4%BD%BF%E7%94%A8"><span class="toc-number">9.7.2.</span> <span class="toc-text">9.7.2 Router 使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-8-EJS%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-number">9.8.</span> <span class="toc-text">9.8 EJS模板引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-1-%E4%BB%80%E4%B9%88%E6%98%AF-EJS"><span class="toc-number">9.8.1.</span> <span class="toc-text">9.8.1 什么是 EJS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-2-EJS%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95"><span class="toc-number">9.8.2.</span> <span class="toc-text">9.8.2 EJS常用语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-3-express%E4%B8%AD%E4%BD%BF%E7%94%A8EJS"><span class="toc-number">9.8.3.</span> <span class="toc-text">9.8.3 express中使用EJS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-4-express-generator"><span class="toc-number">9.8.4.</span> <span class="toc-text">9.8.4 express-generator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-5-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">9.8.5.</span> <span class="toc-text">9.8.5 文件上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-6-%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">9.8.6.</span> <span class="toc-text">9.8.6 文件处理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-Mongodb"><span class="toc-number">10.</span> <span class="toc-text">10.Mongodb</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-%E4%BB%8B%E7%BB%8D"><span class="toc-number">10.1.</span> <span class="toc-text">10.1 介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%90%AF%E5%8A%A8"><span class="toc-number">10.2.</span> <span class="toc-text">10.2 下载与启动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3-%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BA%A4%E4%BA%92"><span class="toc-number">10.3.</span> <span class="toc-text">10.3 命令行交互</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-4-mongoose"><span class="toc-number">10.4.</span> <span class="toc-text">10.4 mongoose</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-1-%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8"><span class="toc-number">10.4.1.</span> <span class="toc-text">10.4.1 初步使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-2-%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B"><span class="toc-number">10.4.2.</span> <span class="toc-text">10.4.2 字段类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-3-%E5%AD%97%E6%AE%B5%E5%80%BC%E9%AA%8C%E8%AF%81"><span class="toc-number">10.4.3.</span> <span class="toc-text">10.4.3 字段值验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-4-CURD"><span class="toc-number">10.4.4.</span> <span class="toc-text">10.4.4 CURD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-5-%E6%9D%A1%E4%BB%B6%E6%8E%A7%E5%88%B6"><span class="toc-number">10.4.5.</span> <span class="toc-text">10.4.5 条件控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-6-%E4%B8%AA%E6%80%A7%E5%8C%96%E8%AF%BB%E5%8F%96"><span class="toc-number">10.4.6.</span> <span class="toc-text">10.4.6 个性化读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-7-%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-number">10.4.7.</span> <span class="toc-text">10.4.7 图形化管理工具</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E6%8E%A5%E5%8F%A3"><span class="toc-number">11.</span> <span class="toc-text">11.接口</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1-RESTful-API"><span class="toc-number">11.1.</span> <span class="toc-text">11.1 RESTful API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-json-server"><span class="toc-number">11.2.</span> <span class="toc-text">11.2 json-server</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12-%E4%BC%9A%E8%AF%9D%E6%8E%A7%E5%88%B6"><span class="toc-number">12.</span> <span class="toc-text">12.会话控制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#12-1-cookie"><span class="toc-number">12.1.</span> <span class="toc-text">12.1 cookie</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-2-session"><span class="toc-number">12.2.</span> <span class="toc-text">12.2 session</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-3-session%E5%92%8Ccookie%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">12.3.</span> <span class="toc-text">12.3 session和cookie的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-4-token"><span class="toc-number">12.4.</span> <span class="toc-text">12.4 token</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-4-1-JWT"><span class="toc-number">12.4.1.</span> <span class="toc-text">12.4.1 JWT</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#13-%E6%A8%A1%E5%9D%97%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8"><span class="toc-number">13.</span> <span class="toc-text">13.模块工具使用</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/05/MySQL%20MVCC%20&amp;%20%E5%B9%B6%E5%8F%91%E6%9B%B4%E6%96%B0%E5%AE%9E%E9%AA%8C%E7%AC%94%E8%AE%B0/" title="MySQL MVCC &amp; 并发更新实验笔记">MySQL MVCC &amp; 并发更新实验笔记</a><time datetime="2025-06-05T15:17:00.000Z" title="发表于 2025-06-05 23:17:00">2025-06-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/03/CSS%20%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A%E8%83%8C%E6%99%AF%E5%9B%BE%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%8A%80%E5%B7%A7/" title="CSS 高斯模糊背景图的实现技巧">CSS 高斯模糊背景图的实现技巧</a><time datetime="2025-06-03T16:21:00.000Z" title="发表于 2025-06-04 00:21:00">2025-06-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/03/JWT%20%E9%89%B4%E6%9D%83%E4%B8%AD%E7%9A%84%E5%8D%95%20Token%20%E4%B8%8E%E5%8F%8C%20Token%E6%96%B9%E6%A1%88%E5%AF%B9%E6%AF%94/" title="JWT 鉴权中的单 Token 与双 Token方案">JWT 鉴权中的单 Token 与双 Token方案</a><time datetime="2025-06-03T13:09:00.000Z" title="发表于 2025-06-03 21:09:00">2025-06-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/01/CSS%E4%B8%AD%E7%9A%84Sticky%E5%AE%9A%E4%BD%8D/" title="CSS中的Sticky定位">CSS中的Sticky定位</a><time datetime="2025-06-01T07:21:00.000Z" title="发表于 2025-06-01 15:21:00">2025-06-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/30/CSS%E9%A1%B5%E9%9D%A2%E5%B8%B8%E8%A7%81%E5%B8%83%E5%B1%80/" title="CSS页面常见布局">CSS页面常见布局</a><time datetime="2025-05-30T12:19:00.000Z" title="发表于 2025-05-30 20:19:00">2025-05-30</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Southblock</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.14.0-b3"></script><script src="/js/main.js?v=4.14.0-b3"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.35/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>